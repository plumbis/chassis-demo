# Created by Topology-Converter v4.6.5
#    Template Revision: v4.6.5
#    https://github.com/cumulusnetworks/topology_converter
#    using topology data from: topology.dot
#    built with the following args: topology_converter.py -c -p libvirt -s 20930 topology.dot
#
#    NOTE: in order to use this Vagrantfile you will need:
#       -Vagrant(v1.8.6+) installed: http://www.vagrantup.com/downloads
#       -the "helper_scripts" directory that comes packaged with topology-converter.py
#        -Libvirt Installed -- guide to come
#       -Vagrant-Libvirt Plugin installed: $ vagrant plugin install vagrant-libvirt
#       -Boxes which have been mutated to support Libvirt -- see guide below:
#            https://community.cumulusnetworks.com/cumulus/topics/converting-cumulus-vx-virtualbox-vagrant-box-gt-libvirt-vagrant-box
#       -Start with \"vagrant up --provider=libvirt --no-parallel\n")

#Set the default provider to libvirt in the case they forget --provider=libvirt or if someone destroys a machine it reverts to virtualbox
ENV['VAGRANT_DEFAULT_PROVIDER'] = 'libvirt'

Vagrant.require_version ">= 1.8.6"

# Check required plugins
REQUIRED_PLUGINS_LIBVIRT = %w(vagrant-libvirt)
exit unless REQUIRED_PLUGINS_LIBVIRT.all? do |plugin|
  Vagrant.has_plugin?(plugin) || (
    puts "The #{plugin} plugin is required. Please install it with:"
    puts "$ vagrant plugin install #{plugin}"
    false
  )
end


$script = <<-SCRIPT
if grep -q -i 'cumulus' /etc/lsb-release &> /dev/null; then
    echo "### RUNNING CUMULUS EXTRA CONFIG ###"
    source /etc/lsb-release
    if [[ $DISTRIB_RELEASE =~ ^2.* ]]; then
        echo "  INFO: Detected a 2.5.x Based Release"

        echo "  adding fake cl-acltool..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-acltool
        chmod 755 /usr/bin/cl-acltool

        echo "  adding fake cl-license..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-license
        chmod 755 /usr/bin/cl-license

        echo "  Disabling default remap on Cumulus VX..."
        mv -v /etc/init.d/rename_eth_swp /etc/init.d/rename_eth_swp.backup

        echo "### Rebooting to Apply Remap..."

    elif [[ $DISTRIB_RELEASE =~ ^3.* ]]; then
        echo "  INFO: Detected a 3.x Based Release"
        echo "### Disabling default remap on Cumulus VX..."
        mv -v /etc/hw_init.d/S10rename_eth_swp.sh /etc/S10rename_eth_swp.sh.backup &> /dev/null
        echo "### Disabling ZTP service..."
        systemctl stop ztp.service
        ztp -d 2>&1
        echo "### Resetting ZTP to work next boot..."
        ztp -R 2>&1
        echo "  INFO: Detected Cumulus Linux v$DISTRIB_RELEASE Release"
        if [[ $DISTRIB_RELEASE =~ ^3.[1-9].* ]]; then
            echo "### Fixing ONIE DHCP to avoid Vagrant Interface ###"
            echo "     Note: Installing from ONIE will undo these changes."
            mkdir /tmp/foo
            mount LABEL=ONIE-BOOT /tmp/foo
            sed -i 's/eth0/eth1/g' /tmp/foo/grub/grub.cfg
            sed -i 's/eth0/eth1/g' /tmp/foo/onie/grub/grub-extra.cfg
            umount /tmp/foo
        fi
        if [[ $DISTRIB_RELEASE =~ ^3.[2-9].* ]]; then
            if [[ $(grep "vagrant" /etc/netd.conf | wc -l ) == 0 ]]; then
                echo "### Giving Vagrant User Ability to Run NCLU Commands ###"
                sed -i 's/users_with_edit = root, cumulus/users_with_edit = root, cumulus, vagrant/g' /etc/netd.conf
                sed -i 's/users_with_show = root, cumulus/users_with_show = root, cumulus, vagrant/g' /etc/netd.conf
            fi
        fi

    fi
fi
echo "### DONE ###"
echo "### Rebooting Device to Apply Remap..."
nohup bash -c 'sleep 10; shutdown now -r "Rebooting to Remap Interfaces"' &
SCRIPT

Vagrant.configure("2") do |config|

  config.vm.provider :libvirt do |domain|
    # increase nic adapter count to be greater than 8 for all VMs.
    domain.management_network_address = "10.255.1.0/24"
    domain.management_network_name = "wbr1"
    domain.nic_adapter_count = 130
  end




  ##### DEFINE VM for oob-mgmt-server #####
  config.vm.define "oob-mgmt-server" do |device|

    device.vm.hostname = "oob-mgmt-server"

    device.vm.box = "cumulus/ts"

    device.vm.provider :libvirt do |v|
      v.memory = 1024
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth1 --> oob-mgmt-switch:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21486',
            :libvirt__iface_name => 'eth1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    #Copy over DHCP files and MGMT Network Files
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.conf", destination: "~/dhcpd.conf"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.hosts", destination: "~/dhcpd.hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/hosts", destination: "~/hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ansible_hostfile", destination: "~/ansible_hostfile"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ztp_oob.sh", destination: "~/ztp_oob.sh"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/auto_mgmt_network/OOB_Server_Config_auto_mgmt.sh"

end

  ##### DEFINE VM for oob-mgmt-switch #####
  config.vm.define "oob-mgmt-switch" do |device|

    device.vm.hostname = "oob-mgmt-switch"

    device.vm.box = "CumulusCommunity/cumulus-vx"

    device.vm.provider :libvirt do |v|
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-server:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22486',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22487',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22488',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis02-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22489',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> chassis02-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22490',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> chassis02-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22491',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> chassis03-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22492',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> chassis02-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22493',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> chassis02-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22494',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> chassis02-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22495',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> chassis04-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22496',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> chassis04-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22497',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> chassis03-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22498',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> server01:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22499',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> server03:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22500',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> server02:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22501',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> server05:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22502',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> chassis04-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22503',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> chassis03-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22504',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> server06:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22505',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> chassis01-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22506',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> chassis01-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22507',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> chassis02-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22508',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> chassis04-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22509',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> chassis03-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22510',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> chassis01-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22511',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> chassis02-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22512',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> chassis02-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22513',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> server04:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22514',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> chassis03-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22515',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> chassis04-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22516',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> chassis04-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22517',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> chassis01-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22518',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> chassis04-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22519',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> chassis04-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22520',
            :libvirt__iface_name => 'swp35',
            auto_config: false
      # link for swp36 --> leaf06:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22521',
            :libvirt__iface_name => 'swp36',
            auto_config: false
      # link for swp37 --> leaf04:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22522',
            :libvirt__iface_name => 'swp37',
            auto_config: false
      # link for swp38 --> leaf05:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22523',
            :libvirt__iface_name => 'swp38',
            auto_config: false
      # link for swp39 --> leaf02:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22524',
            :libvirt__iface_name => 'swp39',
            auto_config: false
      # link for swp40 --> leaf03:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22525',
            :libvirt__iface_name => 'swp40',
            auto_config: false
      # link for swp41 --> leaf01:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22526',
            :libvirt__iface_name => 'swp41',
            auto_config: false
      # link for swp42 --> chassis02-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22527',
            :libvirt__iface_name => 'swp42',
            auto_config: false
      # link for swp43 --> chassis03-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22528',
            :libvirt__iface_name => 'swp43',
            auto_config: false
      # link for swp44 --> chassis01-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22529',
            :libvirt__iface_name => 'swp44',
            auto_config: false
      # link for swp45 --> chassis03-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22530',
            :libvirt__iface_name => 'swp45',
            auto_config: false
      # link for swp46 --> chassis01-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22531',
            :libvirt__iface_name => 'swp46',
            auto_config: false
      # link for swp47 --> chassis04-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22532',
            :libvirt__iface_name => 'swp47',
            auto_config: false
      # link for swp48 --> chassis04-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22533',
            :libvirt__iface_name => 'swp48',
            auto_config: false
      # link for swp49 --> chassis03-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22534',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> chassis03-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22535',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22536',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis01-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22537',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis01-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22538',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis03-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22539',
            :libvirt__iface_name => 'swp54',
            auto_config: false
      # link for swp55 --> chassis01-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22540',
            :libvirt__iface_name => 'swp55',
            auto_config: false
      # link for swp56 --> chassis01-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22541',
            :libvirt__iface_name => 'swp56',
            auto_config: false
      # link for swp57 --> chassis01-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22542',
            :libvirt__iface_name => 'swp57',
            auto_config: false
      # link for swp58 --> chassis02-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22543',
            :libvirt__iface_name => 'swp58',
            auto_config: false
      # link for swp59 --> chassis04-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22544',
            :libvirt__iface_name => 'swp59',
            auto_config: false
      # link for swp60 --> chassis04-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22545',
            :libvirt__iface_name => 'swp60',
            auto_config: false
      # link for swp61 --> chassis03-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22546',
            :libvirt__iface_name => 'swp61',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/oob_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:49 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:49", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4d --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4d", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4f --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4f", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:51 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:51", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:53 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:53", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:55 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:55", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:57 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:57", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:59 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:59", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5b --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5b", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5d --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5d", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5f --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5f", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:61 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:61", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:63 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:63", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:65 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:65", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:67 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:67", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:69 --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:69", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6b --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6b", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6d --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6d", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6f --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6f", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:71 --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:71", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:73 --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:73", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:75 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:75", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:77 --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:77", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:79 --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:79", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7b --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7b", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7d --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7d", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7f --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7f", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:81 --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:81", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:83 --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:83", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:85 --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:85", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:87 --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:87", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:89 --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:89", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8b --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8b", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8d --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8d", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8f --> swp36"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8f", NAME="swp36", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:91 --> swp37"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:91", NAME="swp37", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:93 --> swp38"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:93", NAME="swp38", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:95 --> swp39"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:95", NAME="swp39", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:97 --> swp40"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:97", NAME="swp40", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:99 --> swp41"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:99", NAME="swp41", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9b --> swp42"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9b", NAME="swp42", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9d --> swp43"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9d", NAME="swp43", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9f --> swp44"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9f", NAME="swp44", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a1 --> swp45"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a1", NAME="swp45", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a3 --> swp46"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a3", NAME="swp46", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a5 --> swp47"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a5", NAME="swp47", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a7 --> swp48"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a7", NAME="swp48", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a9 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a9", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ab --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ab", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ad --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ad", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:af --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:af", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b1 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b1", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b3 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b3", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b5 --> swp55"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b5", NAME="swp55", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b7 --> swp56"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b7", NAME="swp56", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b9 --> swp57"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b9", NAME="swp57", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bb --> swp58"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bb", NAME="swp58", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bd --> swp59"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bd", NAME="swp59", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bf --> swp60"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bf", NAME="swp60", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c1 --> swp61"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c1", NAME="swp61", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-1 #####
  config.vm.define "chassis02-lc1-1" do |device|

    device.vm.hostname = "chassis02-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21487',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22229',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22131',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22335',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22047',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22134',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22039',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22151',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22390',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22090',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22326',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22005',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22268',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22333',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22339',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22352',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22429',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21167',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:51 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:51", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8e --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8e", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:23 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:23", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:94 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:94", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d6 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d6", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8f --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8f", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:11 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:11", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:93 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:93", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1f --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1f", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2b --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2b", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:44 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:44", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dc --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dc", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d7 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d7", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-1 #####
  config.vm.define "chassis03-lc1-1" do |device|

    device.vm.hostname = "chassis03-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21488',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22374',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22122',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22411',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22462',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22484',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22234',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22035',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20986',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21986',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22054',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22161',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22261',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22469',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20982',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21982',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22013',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22062',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22240',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21445',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:47 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:47", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5a --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5a", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ce --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ce", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f4 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f4", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ca --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ca", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8f --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8f", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:65 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:65", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a3 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a3", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:04 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:04", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:66 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:66", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc1-1 #####
  config.vm.define "chassis02-fc1-1" do |device|

    device.vm.hostname = "chassis02-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21489',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21229',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21131',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21335',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21047',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21383',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21067',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21442',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21259',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21148',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21373',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21049',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21181',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21206',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21007',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21120',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21164',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21418',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21330',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21378',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21996',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20996',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21029',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21211',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21231',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21056',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21993',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20993',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21973',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20973',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21209',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21266',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21191',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21042',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21051',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21075',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:50 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:50", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:52 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:52", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:24 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:24", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e7 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e7", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:82 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:82", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8c --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8c", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b1 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b1", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:eb --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:eb", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f3 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f3", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:25 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:25", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:98 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:98", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:79 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:79", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d1 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d1", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c8 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c8", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:78 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:78", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:82 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:82", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c3 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c3", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2e --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2e", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:56 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:56", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f9 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f9", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7c --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7c", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:54 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:54", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2a --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2a", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:07 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:07", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dd --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dd", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ef --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ef", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1f --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1f", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-2 #####
  config.vm.define "chassis02-lc1-2" do |device|

    device.vm.hostname = "chassis02-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21490',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22383',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22067',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22442',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22259',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22459',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22310',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20939',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21939',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20985',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21985',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22057',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22185',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22171',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22199',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22286',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22306',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22391',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22353',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21951',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20951',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:52 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:52", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:81 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:81", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0e --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0e", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f5 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f5", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:17 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:17", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f1 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f1", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:11 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:11", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fa --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fa", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fa --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fa", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:de --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:de", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:16 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:16", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e9 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e9", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:91 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:91", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:46 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:46", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc3-1 #####
  config.vm.define "chassis02-fc3-1" do |device|

    device.vm.hostname = "chassis02-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21491',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21090',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21326',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21005',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21268',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21057',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21185',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21171',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21199',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21017',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21298',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21009',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21280',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21363',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21220',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21958',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20958',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21032',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21984',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20984',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21218',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21262',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21440',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21061',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21058',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21987',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20987',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21193',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21360',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21435',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21396',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21409',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21293',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21133',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21349',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21087',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:54 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:54", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3d --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3d", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:12 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:12", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:94 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:94", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fb --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fb", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fb --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fb", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:df --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:df", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:17 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:17", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ab --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ab", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:da --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:da", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b6 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b6", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:40 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:40", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c9 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c9", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6a --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6a", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3c --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3c", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:92 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:92", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f2 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f2", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:03 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:03", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fd --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fd", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:70 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:70", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0b --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0b", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:55 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:55", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e9 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e9", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9c --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9c", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b6 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b6", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d0 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d0", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:93 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:93", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3f --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3f", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:37 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:37", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-1 #####
  config.vm.define "chassis03-lc3-1" do |device|

    device.vm.hostname = "chassis03-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21492',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22337',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22371',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22402',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22157',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22037',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22276',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22175',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22146',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22083',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22020',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22265',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22415',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22399',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22346',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22102',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22377',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21078',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:56 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:56", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:27 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:27", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:69 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:69", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ad --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ad", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ac --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ac", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b0 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b0", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:97 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:97", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:39 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:39", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:54 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:54", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:75 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:75", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:25 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:25", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-2 #####
  config.vm.define "chassis02-lc2-2" do |device|

    device.vm.hostname = "chassis02-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21493',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22206',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22007',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22120',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22164',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22355',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22252',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22124',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22257',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22363',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22220',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20958',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21958',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22032',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22369',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22420',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22456',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22242',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21392',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:58 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:58", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:24 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:24", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:97 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:97", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:78 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:78", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d0 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d0", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4a --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4a", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7d --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7d", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:80 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:80", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:87 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:87", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5a --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5a", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3f --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3f", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:36 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:36", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c8 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c8", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:65 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:65", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cb --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cb", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:11 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:11", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:94 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:94", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc2-1 #####
  config.vm.define "chassis02-fc2-1" do |device|

    device.vm.hostname = "chassis02-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21494',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21134',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21039',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21151',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21390',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21459',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21310',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21939',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20939',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21985',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20985',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21224',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21226',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21313',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21340',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21355',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21252',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21124',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21257',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21325',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21136',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21249',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21977',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20977',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21088',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21405',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21477',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21053',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21291',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21178',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21255',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21021',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21018',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21385',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21015',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21105',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:95 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:95", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d7 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d7", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:90 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:90", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:18 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:18", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f2 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f2", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:12 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:12", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6c --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6c", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:48 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:48", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4c --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4c", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f8 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f8", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:81 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:81", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:88 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:88", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:10 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:10", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:99 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:99", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:78 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:78", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5c --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5c", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:39 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:39", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ae --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ae", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3b --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3b", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f3 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f3", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cc --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cc", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ed --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ed", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:84 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:84", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b3 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b3", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ad --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ad", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:86 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:86", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a8 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a8", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-1 #####
  config.vm.define "chassis02-lc2-1" do |device|

    device.vm.hostname = "chassis02-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21495',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22148',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22373',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22049',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22181',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22224',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22226',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22313',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22340',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22017',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22298',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22009',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22280',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20949',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21949',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22278',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22216',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22180',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21942',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20942',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b0 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b0", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ea --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ea", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:47 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:47", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:aa --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:aa", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:25 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:25", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f0 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f0", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:18 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:18", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-1 #####
  config.vm.define "chassis04-lc3-1" do |device|

    device.vm.hostname = "chassis04-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21496',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22195',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20978',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21978',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22190',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22235',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22091',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22366',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22152',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22002',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22389',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22170',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22422',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20966',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21966',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20979',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21979',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22025',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22143',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22476',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21155',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0e --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0e", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:04 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:04", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b8 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b8", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cf --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cf", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:46 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:46", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5f --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5f", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ba --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ba", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a6 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a6", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:38 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:38", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bf --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bf", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc1-1 #####
  config.vm.define "chassis04-fc1-1" do |device|

    device.vm.hostname = "chassis04-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21497',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21315',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21034',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21201',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21995',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20995',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21307',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21283',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21282',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21322',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21434',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21109',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21305',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21328',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21444',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21254',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21451',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21421',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21195',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21978',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20978',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21190',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21235',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21294',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21273',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21221',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21382',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21117',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21072',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21327',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21023',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21004',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21068',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21074',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21419',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:60 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:60", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fc --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fc", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cd --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cd", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1b --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1b", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:80 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:80", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ec --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ec", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bc --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bc", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ba --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ba", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:63 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:63", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e8 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e8", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:16 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:16", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fa --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fa", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:82 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:82", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:08 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:08", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ce --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ce", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5e --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5e", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:05 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:05", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d2 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d2", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a8 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a8", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:42 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:42", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:80 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:80", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:73 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:73", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:19 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:19", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:14 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:14", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b7 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b7", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:92 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:92", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:11 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:11", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ca --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ca", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc4-1 #####
  config.vm.define "chassis03-fc4-1" do |device|

    device.vm.hostname = "chassis03-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21498',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21982',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20982',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21013',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21062',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21240',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21189',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21250',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21215',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21031',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21158',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21024',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21400',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21384',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21408',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21113',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21066',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21187',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21399',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21346',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21102',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21377',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21028',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21110',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21413',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21947',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20947',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21472',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21479',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21480',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21997',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20997',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21314',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21096',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21145',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21975',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20975',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:62 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:62", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:66 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:66", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:05 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:05", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:67 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:67", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:03 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:03", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7a --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7a", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:36 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:36", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a4 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a4", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:84 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:84", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6b --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6b", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ff --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ff", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a2 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a2", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:55 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:55", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:76 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:76", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c1 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c1", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:65 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:65", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:be --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:be", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:22 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:22", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:31 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:31", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3f --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3f", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:41 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:41", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:84 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:84", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fa --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fa", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:49 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:49", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ab --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ab", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:58 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:58", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-1 #####
  config.vm.define "chassis04-lc2-1" do |device|

    device.vm.hostname = "chassis04-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21503',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22434',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22109',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22305',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22328',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22165',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22153',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22127',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22108',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22082',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22412',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22331',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22104',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22027',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22003',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22128',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20961',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21961',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21427',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e6 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e6", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:62 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:62", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:15 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:15", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ba --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ba", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:86 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:86", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:60 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:60", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bb --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bb", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:58 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:58", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:be --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:be", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:88 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:88", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:da --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:da", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-1 #####
  config.vm.define "chassis03-lc2-1" do |device|

    device.vm.hostname = "chassis03-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21504',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22179',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22450',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22433',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22111',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22454',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22019',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20935',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21935',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22135',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22304',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22370',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22292',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20981',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21981',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22158',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22024',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22400',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22384',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21214',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ee --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ee", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:05 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:05", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e4 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e4", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:66 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:66", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ae --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ae", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:09 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:09", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:96 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:96", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:67 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:67", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cd --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cd", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:63 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:63", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b8 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b8", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a3 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a3", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:83 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:83", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:34 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:34", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc4-1 #####
  config.vm.define "chassis01-fc4-1" do |device|

    device.vm.hostname = "chassis01-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21506',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21026',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21438',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21308',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21008',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21271',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21342',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21095',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21452',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21183',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21386',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21969',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20969',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21044',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21414',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21098',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21423',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21126',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21279',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21059',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21932',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20932',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21470',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21311',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21316',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21069',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21228',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21404',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21076',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21156',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21115',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21955',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20955',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21407',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21938',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20938',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21251',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:72 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:72", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bd --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bd", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ee --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ee", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ee --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ee", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9a --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9a", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a4 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a4", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:32 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:32", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:47 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:47", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:88 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:88", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c0 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c0", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d2 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d2", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:85 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:85", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b4 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b4", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ff --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ff", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:04 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:04", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f4 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f4", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fe --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fe", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:13 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:13", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:50 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:50", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ac --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ac", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:21 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:21", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c1 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c1", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6f --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6f", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:32 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:32", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b2 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b2", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:10 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:10", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7c --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7c", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc1-1 #####
  config.vm.define "chassis01-fc1-1" do |device|

    device.vm.hostname = "chassis01-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21507',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21184',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21439',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21364',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21112',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21425',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21232',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21953',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20953',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21350',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21248',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21247',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21290',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21225',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21416',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21320',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21040',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21332',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21367',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21055',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21424',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21356',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21401',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21302',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21243',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21967',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20967',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21972',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20972',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21464',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21081',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21395',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21267',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21376',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21933',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20933',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21368',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:74 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:74", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f0 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f0", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:69 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:69", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:58 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:58", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2e --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2e", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:41 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:41", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:76 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:76", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:74 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:74", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ca --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ca", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:06 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:06", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d9 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d9", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:62 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:62", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f7 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f7", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d4 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d4", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a6 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a6", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e2 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e2", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6d --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6d", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:49 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:49", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:52 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:52", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:21 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:21", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2b --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2b", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9c --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9c", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:74 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:74", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:06 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:06", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:64 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:64", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-1 #####
  config.vm.define "chassis02-lc3-1" do |device|

    device.vm.hostname = "chassis02-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21508',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22418',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22330',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22378',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20996',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21996',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22325',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22136',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22249',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20977',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21977',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20984',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21984',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22218',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22262',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22440',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20991',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21991',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22064',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22033',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22324',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21426',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:76 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:76", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c7 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c7", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:19 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:19", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:77 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:77", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:81 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:81", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0f --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0f", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:98 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:98", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:77 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:77", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:69 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:69", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:91 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:91", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:77 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:77", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:08 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:08", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ca --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ca", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0d --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0d", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d8 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d8", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-2 #####
  config.vm.define "chassis04-lc3-2" do |device|

    device.vm.hostname = "chassis04-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21509',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22294',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22273',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22221',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22382',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22295',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22166',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22448',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22300',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22285',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22196',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22140',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22213',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22275',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20946',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21946',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22103',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22481',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21379',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:78 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:78", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d1 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d1", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a7 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a7", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:41 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:41", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d3 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d3", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d4 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d4", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:01 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:01", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dd --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dd", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:10 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:10", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:31 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:31", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ab --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ab", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:56 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:56", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:42 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:42", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7a --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7a", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-2 #####
  config.vm.define "chassis03-lc1-2" do |device|

    device.vm.hostname = "chassis03-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21510',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22212',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22256',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22142',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20934',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21934',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22043',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22388',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20950',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21950',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22344',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22296',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22432',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22458',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22319',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22189',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22250',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22215',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22031',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21244',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:85 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:85", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a4 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a4", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:07 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:07", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:de --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:de", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:27 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:27", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:35 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:35", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e2 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e2", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:15 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:15", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:03 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:03", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:02 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:02", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:79 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:79", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:35 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:35", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc3-1 #####
  config.vm.define "chassis01-fc3-1" do |device|

    device.vm.hostname = "chassis01-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21511',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21351',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21463',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21323',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21437',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21010',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21160',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21106',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21137',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21931',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20931',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21397',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21162',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21362',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21177',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21943',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20943',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21962',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20962',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21380',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21954',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20954',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21960',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20960',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21375',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21269',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21118',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21245',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21258',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21173',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21052',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21063',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21163',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21186',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21093',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21099',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21036',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21203',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:43 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:43", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ec --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ec", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c9 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c9", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5d --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5d", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:02 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:02", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cd --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cd", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:eb --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:eb", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:30 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:30", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3b --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3b", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:72 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:72", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a0 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a0", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:75 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:75", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:71 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:71", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8a --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8a", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e3 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e3", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f1 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f1", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:07 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:07", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cf --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cf", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fd --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fd", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:43 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:43", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4f --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4f", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d1 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d1", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1f --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1f", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-1 #####
  config.vm.define "chassis02-lc4-1" do |device|

    device.vm.hostname = "chassis02-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21512',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20993',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21993',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20973',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21973',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22209',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22266',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22291',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22178',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22255',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22021',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22360',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22435',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22396',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22409',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22188',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22381',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22219',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20974',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21974',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:53 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:53", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:29 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:29", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:99 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:99", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cb --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cb", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ec --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ec", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:83 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:83", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:54 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:54", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e8 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e8", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:00 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:00", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:55 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:55", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-2 #####
  config.vm.define "chassis02-lc4-2" do |device|

    device.vm.hostname = "chassis02-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21513',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22191',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22042',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22051',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22075',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22018',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22385',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22015',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22105',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22293',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22133',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22349',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22087',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22125',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22321',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22348',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22094',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:80 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:80", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:06 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:06", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dc --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dc", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ee --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ee", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ac --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ac", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:85 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:85", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:92 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:92", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:36 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:36", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:82 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:82", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:07 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:07", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:44 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:44", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-2 #####
  config.vm.define "chassis03-lc3-2" do |device|

    device.vm.hostname = "chassis03-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21515',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22299',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22372',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22139',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20992',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21992',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22038',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22238',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22263',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22168',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22354',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22237',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22174',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22236',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22028',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22110',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22413',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20947',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21947',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21441',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:84 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:84", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:db --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:db", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6b --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6b", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9e --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9e", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:79 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:79", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d4 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d4", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:62 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:62", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:93 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:93", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d8 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d8", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:48 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:48", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:60 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:60", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e4 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e4", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c0 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c0", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:64 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:64", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bd --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bd", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:21 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:21", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f4 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f4", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc3-1 #####
  config.vm.define "chassis04-fc3-1" do |device|

    device.vm.hostname = "chassis04-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21516',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21449',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21471',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21227',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21149',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21341',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21483',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21092',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21387',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21082',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21412',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21331',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21104',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21952',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20952',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21277',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21114',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21014',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21389',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21170',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21422',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21966',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20966',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21285',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21196',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21140',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21213',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21230',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21200',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21431',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21050',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21941',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20941',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21274',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21473',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21144',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:86 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:86", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:04 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:04", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4e --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4e", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b3 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b3", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:30 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:30", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:46 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:46", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:41 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:41", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2c --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2c", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b0 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b0", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8e --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8e", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dd --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dd", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d0 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d0", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:47 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:47", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c0 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c0", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:11 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:11", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a1 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a1", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:32 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:32", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:54 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:54", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:19 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:19", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e1 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e1", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ed --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ed", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:16 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:16", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:aa --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:aa", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:33 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:33", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a9 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a9", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-2 #####
  config.vm.define "chassis04-lc2-2" do |device|

    device.vm.hostname = "chassis04-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21517',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22444',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22254',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22451',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22421',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22287',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22176',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22116',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22030',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20952',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21952',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22277',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22114',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22014',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22453',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22446',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22119',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22288',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21239',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:88 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:88", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:81 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:81", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:07 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:07", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c3 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c3", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e8 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e8", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:70 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:70", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c4 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c4", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:af --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:af", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fd --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fd", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:76 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:76", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:65 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:65", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc2-1 #####
  config.vm.define "chassis01-fc2-1" do |device|

    device.vm.hostname = "chassis01-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21518',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21406',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21198',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21241',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21208',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21474',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21447',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21046',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21222',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21194',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21937',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20937',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21272',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21361',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21172',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21957',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20957',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21141',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21358',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21130',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21223',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21065',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21022',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21001',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21334',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21988',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20988',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21959',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20959',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21403',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21336',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21169',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21097',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21357',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21197',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21318',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21964',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20964',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b0 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b0", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:15 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:15", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:69 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:69", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:28 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:28", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:35 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:35", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:00 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:00", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:44 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:44", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a6 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a6", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:57 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:57", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:35 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:35", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a3 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a3", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:51 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:51", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8d --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8d", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:46 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:46", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0b --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0b", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b5 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b5", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8c --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8c", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:22 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:22", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:72 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:72", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:39 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:39", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:aa --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:aa", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:26 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:26", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:db --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:db", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4b --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4b", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4f --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4f", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:13 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:13", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:02 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:02", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:43 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:43", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc2-1 #####
  config.vm.define "chassis04-fc2-1" do |device|

    device.vm.hostname = "chassis04-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21519',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21048',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21101',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21217',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21410',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21260',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21393',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21071',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21100',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21165',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21153',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21127',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21108',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21287',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21176',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21116',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21030',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21091',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21366',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21152',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21002',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21295',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21166',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21448',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21300',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21159',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21468',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21417',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21012',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21970',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20970',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21359',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21478',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21457',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:53 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:53", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b8 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b8", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:96 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:96", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:17 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:17", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:51 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:51", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d3 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d3", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bb --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bb", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:87 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:87", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:61 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:61", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e9 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e9", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:71 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:71", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:60 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:60", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b9 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b9", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d4 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d4", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d5 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d5", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:02 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:02", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:de --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:de", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c7 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c7", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:29 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:29", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c6 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c6", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a2 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a2", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4f --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4f", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:53 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:53", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:14 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:14", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc4-1 #####
  config.vm.define "chassis04-fc4-1" do |device|

    device.vm.hostname = "chassis04-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21520',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21289',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21086',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21455',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21475',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21060',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21129',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21345',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21147',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21027',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21003',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21128',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21961',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20961',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21453',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21446',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21119',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21288',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21979',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20979',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21025',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21143',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21476',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21275',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21946',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20946',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21103',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21481',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21121',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21107',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21281',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21210',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21297',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21150',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21940',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20940',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21073',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:35 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:35", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:10 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:10", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:37 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:37", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:01 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:01", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:38 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:38", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:af --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:af", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:90 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:90", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:89 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:89", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0c --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0c", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fe --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fe", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:77 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:77", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:60 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:60", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bb --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bb", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a7 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a7", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:39 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:39", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ac --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ac", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:20 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:20", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:57 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:57", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:43 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:43", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7b --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7b", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5f --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5f", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b8 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b8", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2c --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2c", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d8 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d8", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b5 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b5", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:14 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:14", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-2 #####
  config.vm.define "chassis02-lc3-2" do |device|

    device.vm.hostname = "chassis02-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp42
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21527',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22029',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22211',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22231',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22056',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22088',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22405',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22477',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22053',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22061',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22058',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20987',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21987',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22193',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22461',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22317',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22045',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21000',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22000',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21192',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c2 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c2", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:55 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:55", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f8 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f8", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:38 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:38", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ad --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ad", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3a --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3a", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:02 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:02", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6f --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6f", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1a --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1a", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ff --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ff", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e2 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e2", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:89 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:89", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:09 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:09", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc2-1 #####
  config.vm.define "chassis03-fc2-1" do |device|

    device.vm.hostname = "chassis03-fc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp43
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21528',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21484',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21234',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21035',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21986',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20986',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21043',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21388',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21950',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20950',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21344',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21454',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21019',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21935',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20935',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21135',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21205',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21999',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20999',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21077',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21270',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21037',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21276',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21175',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21146',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21038',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21238',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21263',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21168',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21006',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21301',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21989',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20989',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21132',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21070',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21085',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21309',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21968',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20968',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:48 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:48", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5b --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5b", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cf --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cf", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:df --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:df", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8c --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8c", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:28 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:28", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:36 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:36", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:af --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:af", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0a --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0a", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:97 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:97", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:23 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:23", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:88 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:88", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:23 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:23", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a2 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a2", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d3 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d3", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ae --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ae", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e7 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e7", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ad --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ad", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d5 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d5", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:63 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:63", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:94 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:94", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d9 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d9", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:96 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:96", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e0 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e0", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:74 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:74", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:91 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:91", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:15 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:15", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:33 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:33", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f0 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f0", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-2 #####
  config.vm.define "chassis01-lc1-2" do |device|

    device.vm.hostname = "chassis01-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp44
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21529',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22425',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22232',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20953',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21953',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22350',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22474',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22447',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22046',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22222',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22010',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22160',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22106',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22137',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22271',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22342',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22095',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22452',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21466',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:57 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:57", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:40 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:40", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:34 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:34", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ff --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ff", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e4 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e4", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:43 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:43", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c8 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c8", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:31 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:31", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:46 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:46", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:09 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:09", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:25 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:25", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc3-1 #####
  config.vm.define "chassis03-fc3-1" do |device|

    device.vm.hostname = "chassis03-fc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp45
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21530',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21054',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21161',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21261',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21469',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21296',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21432',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21458',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21319',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21304',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21370',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21292',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21981',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20981',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21343',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21963',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20963',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21138',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21948',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20948',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21083',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21020',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21265',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21415',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21354',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21237',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21174',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21236',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21123',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21253',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21990',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20990',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21976',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20976',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21284',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21329',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21080',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21945',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20945',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cb --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cb", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:90 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:90", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e3 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e3", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:16 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:16", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:04 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:04", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e6 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e6", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:68 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:68", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ce --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ce", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:64 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:64", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:34 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:34", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:41 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:41", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:24 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:24", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b1 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b1", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:98 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:98", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c2 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c2", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:49 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:49", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:61 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:61", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e5 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e5", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5f --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5f", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7f --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7f", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:80 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:80", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:76 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:76", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:be --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:be", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:18 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:18", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:29 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:29", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-1 #####
  config.vm.define "chassis01-lc1-1" do |device|

    device.vm.hostname = "chassis01-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp46
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21531',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22184',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22439',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22364',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22112',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22406',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22198',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22241',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22208',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22351',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22463',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22323',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22437',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22026',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22438',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22308',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22008',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21084',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ef --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ef", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:68 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:68", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:af --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:af", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:14 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:14", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:68 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:68", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:27 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:27", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:42 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:42", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:eb --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:eb", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bc --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bc", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ed --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ed", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ed --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ed", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:99 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:99", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:31 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:31", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-2 #####
  config.vm.define "chassis04-lc1-2" do |device|

    device.vm.hostname = "chassis04-lc1-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp47
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21532',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22307',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22283',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22282',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22322',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22260',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22393',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22071',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22100',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22341',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22483',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22092',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22387',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22060',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22129',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22345',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22147',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21079',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:eb --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:eb", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bb --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bb", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:09 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:09", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:95 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:95", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:16 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:16", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:50 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:50", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:45 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:45", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:40 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:40", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:89 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:89", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:00 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:00", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ae --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ae", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:27 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:27", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-1 #####
  config.vm.define "chassis04-lc1-1" do |device|

    device.vm.hostname = "chassis04-lc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp48
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21533',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22315',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22034',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22201',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20995',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21995',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22048',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22101',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22217',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22410',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22449',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22471',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22227',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22149',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22289',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22086',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22455',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22475',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21998',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20998',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fb --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fb", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cc --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cc", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e8 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e8", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:52 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:52", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:39 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:39", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:03 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:03", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b2 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b2", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c7 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c7", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:34 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:34", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:36 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:36", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:86 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:86", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc1-1 #####
  config.vm.define "chassis03-fc1-1" do |device|

    device.vm.hostname = "chassis03-fc1-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21534',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21374',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21122',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21411',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21462',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21212',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21256',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21142',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21934',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20934',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21179',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21450',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21433',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21111',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21980',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20980',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21182',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21443',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21944',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20944',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21337',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21371',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21402',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21157',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21299',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21372',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21139',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21992',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20992',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21312',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21041',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21398',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21430',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21089',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21202',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21303',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21994',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20994',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:aa --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:aa", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:70 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:70", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ba --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ba", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:30 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:30", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:86 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:86", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:08 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:08", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ef --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ef", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:06 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:06", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e5 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e5", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:67 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:67", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:62 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:62", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f5 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f5", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f8 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f8", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:28 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:28", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a8 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a8", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c3 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c3", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dc --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dc", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6c --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6c", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9f --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9f", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f6 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f6", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:db --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:db", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a0 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a0", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:df --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:df", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3b --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3b", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1d --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1d", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e4 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e4", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-2 #####
  config.vm.define "chassis03-lc2-2" do |device|

    device.vm.hostname = "chassis03-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21535',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20980',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21980',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22182',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22443',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20944',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21944',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22205',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20999',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21999',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22077',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22270',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22343',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20963',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21963',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22138',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20948',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21948',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22408',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22113',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22066',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22187',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21467',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ac --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ac", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:61 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:61", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:22 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:22", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:87 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:87", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:22 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:22", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:33 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:33", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:40 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:40", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:23 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:23", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fe --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fe", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:27 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:27", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-2 #####
  config.vm.define "chassis01-lc4-2" do |device|

    device.vm.hostname = "chassis01-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21536',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22267',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22376',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20933',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21933',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22368',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22357',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22197',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22318',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20964',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21964',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22093',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22099',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22036',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22203',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20955',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21955',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22407',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20938',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21938',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22251',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ae --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ae", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:73 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:73", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:05 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:05", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:63 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:63", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:12 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:12", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:01 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:01", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:42 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:42", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:42 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:42", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:31 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:31", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-1 #####
  config.vm.define "chassis01-lc4-1" do |device|

    device.vm.hostname = "chassis01-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21537',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20972',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21972',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22464',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22081',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22395',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22403',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22336',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22169',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22097',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22052',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22063',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22163',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22186',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22404',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22076',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22156',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22115',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:51 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:51", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:20 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:20", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:99 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:99", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a9 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a9", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:25 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:25", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:da --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:da", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f0 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f0", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:06 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:06", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ce --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ce", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fc --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fc", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ab --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ab", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:20 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:20", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c0 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c0", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-1 #####
  config.vm.define "chassis01-lc2-1" do |device|

    device.vm.hostname = "chassis01-lc2-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21538',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22248',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22247',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22290',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22225',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22194',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20937',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21937',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22272',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22361',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20931',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21931',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22397',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22162',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22362',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22183',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22386',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20969',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21969',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22044',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21394',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:75 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:75", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:73 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:73", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:49 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:49", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0c --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0c", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0d --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0d", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:56 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:56", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:01 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:01", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cc --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cc", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:58 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:58", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f6 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f6", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:87 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:87", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e0 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e0", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:98 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:98", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-1 #####
  config.vm.define "chassis03-lc4-1" do |device|

    device.vm.hostname = "chassis03-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21539',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22312',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22041',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22398',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22430',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22006',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22301',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20989',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21989',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22132',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22123',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22253',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20990',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21990',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20976',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21976',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22472',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22479',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22480',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20997',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21997',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:da --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:da", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9f --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9f", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:de --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:de", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:95 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:95", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:df --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:df", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:73 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:73", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:90 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:90", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7f --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7f", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:75 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:75", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:30 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:30", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:40 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:40", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:83 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:83", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-2 #####
  config.vm.define "chassis01-lc2-2" do |device|

    device.vm.hostname = "chassis01-lc2-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp55
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21540',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22416',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22320',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22040',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22332',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22172',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20957',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21957',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22141',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22358',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22177',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20943',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21943',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20962',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21962',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22380',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22414',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22098',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22423',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22126',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21264',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c3 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c3", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:05 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:05", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d8 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d8", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e0 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e0", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:34 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:34", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a2 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a2", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:50 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:50", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ea --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ea", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:19 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:19", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7b --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7b", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bf --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bf", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4c --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4c", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d1 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d1", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:84 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:84", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:96 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:96", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-1 #####
  config.vm.define "chassis01-lc3-1" do |device|

    device.vm.hostname = "chassis01-lc3-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp56
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21541',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22367',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22055',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22424',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22356',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22130',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22223',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22065',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22022',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20954',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21954',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20960',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21960',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22375',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22269',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22279',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22059',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20932',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21932',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22470',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21011',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:61 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:61", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f6 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f6", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d3 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d3", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8c --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8c", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:45 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:45", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0a --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0a", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b4 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b4", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3a --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3a", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:71 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:71", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9f --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9f", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fe --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fe", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:03 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:03", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a0 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a0", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-2 #####
  config.vm.define "chassis01-lc3-2" do |device|

    device.vm.hostname = "chassis01-lc3-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp57
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21542',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22401',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22302',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22243',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20967',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21967',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22001',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22334',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20988',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21988',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20959',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21959',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22118',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22245',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22258',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22173',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22311',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22316',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22069',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22228',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21154',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ba --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ba", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e1 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e1", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:48 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:48", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8b --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8b", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:21 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:21", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:71 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:71", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:38 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:38", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:74 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:74", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:70 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:70", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:89 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:89", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e2 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e2", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fd --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fd", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:12 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:12", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4f --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4f", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bd --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bd", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc4-1 #####
  config.vm.define "chassis02-fc4-1" do |device|

    device.vm.hostname = "chassis02-fc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp58
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21543',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21333',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21339',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21352',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21429',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21286',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21306',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21391',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21353',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21949',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20949',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21278',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21216',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21180',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21369',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21420',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21456',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21242',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21991',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20991',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21064',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21033',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21324',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21461',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21317',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21045',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22000',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21000',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21188',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21381',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21219',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21974',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20974',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21125',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21321',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21348',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21094',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:20 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:20", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:45 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:45", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ea --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ea", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:92 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:92", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:47 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:47", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:26 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:26", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b2 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b2", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:38 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:38", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:66 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:66", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cc --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cc", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:12 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:12", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:78 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:78", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:09 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:09", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cb --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cb", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1b --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1b", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:00 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:00", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e3 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e3", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:01 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:01", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7e --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7e", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3e --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3e", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:56 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:56", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:83 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:83", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:08 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:08", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:45 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:45", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-1 #####
  config.vm.define "chassis04-lc4-1" do |device|

    device.vm.hostname = "chassis04-lc4-1"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp59
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21544',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22117',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22072',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22327',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22023',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22159',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22468',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22417',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22012',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22230',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22200',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22431',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22050',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22121',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22107',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22281',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22210',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:be --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:be", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:72 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:72", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:18 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:18", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:13 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:13", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:28 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:28", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:53 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:53", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:18 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:18", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ec --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ec", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7a --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7a", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b7 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b7", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-2 #####
  config.vm.define "chassis04-lc4-2" do |device|

    device.vm.hostname = "chassis04-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp60
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21545',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22004',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22068',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22074',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22419',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20970',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21970',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22359',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22478',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22457',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20941',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21941',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22274',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22473',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22144',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22297',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22150',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20940',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21940',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22073',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:91 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:91", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:10 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:10", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c9 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c9", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:52 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:52", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3c --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3c", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:13 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:13", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:15 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:15", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:32 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:32", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a8 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a8", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d7 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d7", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b4 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b4", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:13 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:13", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-2 #####
  config.vm.define "chassis03-lc4-2" do |device|

    device.vm.hostname = "chassis03-lc4-2"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp61
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21546',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22089',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22202',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22303',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20994',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21994',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22070',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22085',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22309',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20968',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21968',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22284',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22329',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22080',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20945',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21945',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22314',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22096',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22145',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20975',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21975',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3a --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3a", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e3 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e3", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:14 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:14", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:32 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:32", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ef --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ef", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bd --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bd", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:17 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:17", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:28 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:28", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f9 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f9", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:48 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:48", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:aa --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:aa", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:57 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:57", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf06 #####
  config.vm.define "leaf06" do |device|

    device.vm.hostname = "leaf06"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp36
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21521',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server05:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21016',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server06:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21956',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20956',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf05:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21338',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf05:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21983',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20983',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22154',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22192',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22441',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22379',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:90 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:90", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a9 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a9", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:33 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:33", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2a --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2a", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:68 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:68", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bc --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bc", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:08 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:08", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f3 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f3", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:79 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:79", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf04 #####
  config.vm.define "leaf04" do |device|

    device.vm.hostname = "leaf04"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp37
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21522',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server03:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21233',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server04:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21365',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf03:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21465',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf03:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21204',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22264',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22392',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22467',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22239',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:92 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:92", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:59 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:59", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:23 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:23", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:21 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:21", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:95 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:95", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:93 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:93", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:26 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:26", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:64 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:64", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf05 #####
  config.vm.define "leaf05" do |device|

    device.vm.hostname = "leaf05"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp38
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21523',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server05:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21482',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server06:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21436',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf06:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22338',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf06:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20983',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21983',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22011',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22426',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22078',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22155',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:94 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:94", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:44 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:44", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ea --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ea", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:29 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:29", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:67 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:67", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9f --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9f", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d7 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d7", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:24 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:24", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:be --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:be", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf02 #####
  config.vm.define "leaf02" do |device|

    device.vm.hostname = "leaf02"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp39
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21524',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server01:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21460',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server02:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21971',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20971',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf01:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21936',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20936',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf01:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21965',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '20965',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22466',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20951',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21951',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22244',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22079',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:96 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:96", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:19 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:19", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:50 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:50", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0c --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0c", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:45 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:45", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:24 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:24", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:29 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:29", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6e --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6e", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:26 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:26", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf03 #####
  config.vm.define "leaf03" do |device|

    device.vm.hostname = "leaf03"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp40
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21525',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server03:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21246',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server04:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21428',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf04:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22465',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf04:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22204',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22394',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20942',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21942',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22214',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22427',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:98 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:98", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:72 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:72", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:db --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:db", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:22 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:22", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:20 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:20", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:97 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:97", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:17 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:17", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:33 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:33", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d9 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d9", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf01 #####
  config.vm.define "leaf01" do |device|

    device.vm.hostname = "leaf01"

    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp41
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21526',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server01:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21347',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server02:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21207',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf02:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20936',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21936',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf02:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20965',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21965',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22084',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22167',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22445',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20998',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21998',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:26 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:26", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0b --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0b", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:44 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:44", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:30 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:30", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d6 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d6", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fb --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fb", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:85 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:85", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server01 #####
  config.vm.define "server01" do |device|

    device.vm.hostname = "server01"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21499',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf01:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:11:11:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22347',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf02:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:11:11:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22460',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:64 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:64", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:11:11:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:11:11:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:11:11:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:11:11:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server03 #####
  config.vm.define "server03" do |device|

    device.vm.hostname = "server03"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21500',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf03:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:33:33:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22246',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf04:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:33:33:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22233',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:66 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:66", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:33:33:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:33:33:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:33:33:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:33:33:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server02 #####
  config.vm.define "server02" do |device|

    device.vm.hostname = "server02"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21501',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf01:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:22:22:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22207',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf02:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:22:22:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20971',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21971',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:68 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:68", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:22:22:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:22:22:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:22:22:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:22:22:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server05 #####
  config.vm.define "server05" do |device|

    device.vm.hostname = "server05"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21502',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf05:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:55:55:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22482',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf06:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:55:55:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22016',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:55:55:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:55:55:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:55:55:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:55:55:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server06 #####
  config.vm.define "server06" do |device|

    device.vm.hostname = "server06"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21505',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf05:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:66:66:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22436',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf06:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:66:66:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '20956',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21956',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:70 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:70", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:66:66:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:66:66:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:66:66:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:66:66:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server04 #####
  config.vm.define "server04" do |device|

    device.vm.hostname = "server04"

    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000'
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '22514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '21514',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf03:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:44:44:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22428',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf04:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:44:44:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '21365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '22365',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:82 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:82", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:44:44:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:44:44:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:44:44:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:44:44:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule

      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end



end
