# Created by Topology-Converter v4.6.5
#    Template Revision: v4.6.5
#    https://github.com/cumulusnetworks/topology_converter
#    using topology data from: topology.dot
#    built with the following args: topology_converter.py -p libvirt -c -s 30000 topology.dot
#
#    NOTE: in order to use this Vagrantfile you will need:
#       -Vagrant(v1.8.6+) installed: http://www.vagrantup.com/downloads
#       -the "helper_scripts" directory that comes packaged with topology-converter.py
#        -Libvirt Installed -- guide to come
#       -Vagrant-Libvirt Plugin installed: $ vagrant plugin install vagrant-libvirt
#       -Boxes which have been mutated to support Libvirt -- see guide below:
#            https://community.cumulusnetworks.com/cumulus/topics/converting-cumulus-vx-virtualbox-vagrant-box-gt-libvirt-vagrant-box
#       -Start with \"vagrant up --provider=libvirt --no-parallel\n")

#Set the default provider to libvirt in the case they forget --provider=libvirt or if someone destroys a machine it reverts to virtualbox
ENV['VAGRANT_DEFAULT_PROVIDER'] = 'libvirt'

Vagrant.require_version ">= 1.8.6"

# Check required plugins
REQUIRED_PLUGINS_LIBVIRT = %w(vagrant-libvirt)
exit unless REQUIRED_PLUGINS_LIBVIRT.all? do |plugin|
  Vagrant.has_plugin?(plugin) || (
    puts "The #{plugin} plugin is required. Please install it with:"
    puts "$ vagrant plugin install #{plugin}"
    false
  )
end


$script = <<-SCRIPT
if grep -q -i 'cumulus' /etc/lsb-release &> /dev/null; then
    echo "### RUNNING CUMULUS EXTRA CONFIG ###"
    source /etc/lsb-release
    if [[ $DISTRIB_RELEASE =~ ^2.* ]]; then
        echo "  INFO: Detected a 2.5.x Based Release"

        echo "  adding fake cl-acltool..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-acltool
        chmod 755 /usr/bin/cl-acltool

        echo "  adding fake cl-license..."
        echo -e "#!/bin/bash\nexit 0" > /usr/bin/cl-license
        chmod 755 /usr/bin/cl-license

        echo "  Disabling default remap on Cumulus VX..."
        mv -v /etc/init.d/rename_eth_swp /etc/init.d/rename_eth_swp.backup

        echo "### Rebooting to Apply Remap..."

    elif [[ $DISTRIB_RELEASE =~ ^3.* ]]; then
        echo "  INFO: Detected a 3.x Based Release"
        echo "### Disabling default remap on Cumulus VX..."
        mv -v /etc/hw_init.d/S10rename_eth_swp.sh /etc/S10rename_eth_swp.sh.backup &> /dev/null
        echo "### Disabling ZTP service..."
        systemctl stop ztp.service
        ztp -d 2>&1
        echo "### Resetting ZTP to work next boot..."
        ztp -R 2>&1
        echo "  INFO: Detected Cumulus Linux v$DISTRIB_RELEASE Release"
        if [[ $DISTRIB_RELEASE =~ ^3.[1-9].* ]]; then
            echo "### Fixing ONIE DHCP to avoid Vagrant Interface ###"
            echo "     Note: Installing from ONIE will undo these changes." 
            mkdir /tmp/foo
            mount LABEL=ONIE-BOOT /tmp/foo
            sed -i 's/eth0/eth1/g' /tmp/foo/grub/grub.cfg
            sed -i 's/eth0/eth1/g' /tmp/foo/onie/grub/grub-extra.cfg
            umount /tmp/foo
        fi
        if [[ $DISTRIB_RELEASE =~ ^3.[2-9].* ]]; then
            if [[ $(grep "vagrant" /etc/netd.conf | wc -l ) == 0 ]]; then
                echo "### Giving Vagrant User Ability to Run NCLU Commands ###"
                sed -i 's/users_with_edit = root, cumulus/users_with_edit = root, cumulus, vagrant/g' /etc/netd.conf
                sed -i 's/users_with_show = root, cumulus/users_with_show = root, cumulus, vagrant/g' /etc/netd.conf
            fi
        fi

    fi
fi
echo "### DONE ###"
echo "### Rebooting Device to Apply Remap..."
nohup bash -c 'sleep 10; shutdown now -r "Rebooting to Remap Interfaces"' &
SCRIPT

Vagrant.configure("2") do |config|

  config.vm.provider :libvirt do |domain|
    # increase nic adapter count to be greater than 8 for all VMs.
    domain.management_network_address = "10.255.1.0/24"
    domain.management_network_name = "wbr1"
    domain.nic_adapter_count = 130
  end




  ##### DEFINE VM for oob-mgmt-server #####
  config.vm.define "oob-mgmt-server" do |device|
    
    device.vm.hostname = "oob-mgmt-server" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth1 --> oob-mgmt-switch:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31556',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30556',
            :libvirt__iface_name => 'eth1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    #Copy over DHCP files and MGMT Network Files
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.conf", destination: "~/dhcpd.conf"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/dhcpd.hosts", destination: "~/dhcpd.hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/hosts", destination: "~/hosts"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ansible_hostfile", destination: "~/ansible_hostfile"
    device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/ztp_oob.sh", destination: "~/ztp_oob.sh"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/auto_mgmt_network/OOB_Server_Config_auto_mgmt.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4a --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4a", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for oob-mgmt-switch #####
  config.vm.define "oob-mgmt-switch" do |device|
    
    device.vm.hostname = "oob-mgmt-switch" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"

    device.vm.provider :libvirt do |v|
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for swp1 --> oob-mgmt-server:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30556',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31556',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> chassis02-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30557',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31557',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp3 --> chassis03-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30558',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31558',
            :libvirt__iface_name => 'swp3',
            auto_config: false
      # link for swp4 --> chassis02-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30559',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31559',
            :libvirt__iface_name => 'swp4',
            auto_config: false
      # link for swp5 --> chassis02-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30560',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31560',
            :libvirt__iface_name => 'swp5',
            auto_config: false
      # link for swp6 --> chassis02-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30561',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31561',
            :libvirt__iface_name => 'swp6',
            auto_config: false
      # link for swp7 --> chassis03-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30562',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31562',
            :libvirt__iface_name => 'swp7',
            auto_config: false
      # link for swp8 --> chassis02-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30563',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31563',
            :libvirt__iface_name => 'swp8',
            auto_config: false
      # link for swp9 --> chassis02-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30564',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31564',
            :libvirt__iface_name => 'swp9',
            auto_config: false
      # link for swp10 --> chassis02-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30565',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31565',
            :libvirt__iface_name => 'swp10',
            auto_config: false
      # link for swp11 --> chassis04-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30566',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31566',
            :libvirt__iface_name => 'swp11',
            auto_config: false
      # link for swp12 --> chassis04-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30567',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31567',
            :libvirt__iface_name => 'swp12',
            auto_config: false
      # link for swp13 --> chassis03-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30568',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31568',
            :libvirt__iface_name => 'swp13',
            auto_config: false
      # link for swp14 --> server01:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30569',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31569',
            :libvirt__iface_name => 'swp14',
            auto_config: false
      # link for swp15 --> server03:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30570',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31570',
            :libvirt__iface_name => 'swp15',
            auto_config: false
      # link for swp16 --> server02:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30571',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31571',
            :libvirt__iface_name => 'swp16',
            auto_config: false
      # link for swp17 --> server05:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30572',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31572',
            :libvirt__iface_name => 'swp17',
            auto_config: false
      # link for swp18 --> chassis04-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30573',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31573',
            :libvirt__iface_name => 'swp18',
            auto_config: false
      # link for swp19 --> chassis03-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30574',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31574',
            :libvirt__iface_name => 'swp19',
            auto_config: false
      # link for swp20 --> server06:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30575',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31575',
            :libvirt__iface_name => 'swp20',
            auto_config: false
      # link for swp21 --> chassis01-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30576',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31576',
            :libvirt__iface_name => 'swp21',
            auto_config: false
      # link for swp22 --> chassis01-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30577',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31577',
            :libvirt__iface_name => 'swp22',
            auto_config: false
      # link for swp23 --> chassis02-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30578',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31578',
            :libvirt__iface_name => 'swp23',
            auto_config: false
      # link for swp24 --> chassis04-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30579',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31579',
            :libvirt__iface_name => 'swp24',
            auto_config: false
      # link for swp25 --> chassis03-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30580',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31580',
            :libvirt__iface_name => 'swp25',
            auto_config: false
      # link for swp26 --> chassis01-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30581',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31581',
            :libvirt__iface_name => 'swp26',
            auto_config: false
      # link for swp27 --> chassis02-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30582',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31582',
            :libvirt__iface_name => 'swp27',
            auto_config: false
      # link for swp28 --> chassis02-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30583',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31583',
            :libvirt__iface_name => 'swp28',
            auto_config: false
      # link for swp29 --> server04:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30584',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31584',
            :libvirt__iface_name => 'swp29',
            auto_config: false
      # link for swp30 --> chassis03-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30585',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31585',
            :libvirt__iface_name => 'swp30',
            auto_config: false
      # link for swp31 --> chassis04-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30586',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31586',
            :libvirt__iface_name => 'swp31',
            auto_config: false
      # link for swp32 --> chassis04-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30587',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31587',
            :libvirt__iface_name => 'swp32',
            auto_config: false
      # link for swp33 --> chassis01-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30588',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31588',
            :libvirt__iface_name => 'swp33',
            auto_config: false
      # link for swp34 --> chassis04-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30589',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31589',
            :libvirt__iface_name => 'swp34',
            auto_config: false
      # link for swp35 --> chassis04-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30590',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31590',
            :libvirt__iface_name => 'swp35',
            auto_config: false
      # link for swp36 --> leaf06:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30591',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31591',
            :libvirt__iface_name => 'swp36',
            auto_config: false
      # link for swp37 --> leaf04:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30592',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31592',
            :libvirt__iface_name => 'swp37',
            auto_config: false
      # link for swp38 --> leaf05:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30593',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31593',
            :libvirt__iface_name => 'swp38',
            auto_config: false
      # link for swp39 --> leaf02:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30594',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31594',
            :libvirt__iface_name => 'swp39',
            auto_config: false
      # link for swp40 --> leaf03:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30595',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31595',
            :libvirt__iface_name => 'swp40',
            auto_config: false
      # link for swp41 --> leaf01:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30596',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31596',
            :libvirt__iface_name => 'swp41',
            auto_config: false
      # link for swp42 --> chassis02-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30597',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31597',
            :libvirt__iface_name => 'swp42',
            auto_config: false
      # link for swp43 --> chassis03-fc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30598',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31598',
            :libvirt__iface_name => 'swp43',
            auto_config: false
      # link for swp44 --> chassis01-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30599',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31599',
            :libvirt__iface_name => 'swp44',
            auto_config: false
      # link for swp45 --> chassis03-fc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30600',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31600',
            :libvirt__iface_name => 'swp45',
            auto_config: false
      # link for swp46 --> chassis01-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30601',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31601',
            :libvirt__iface_name => 'swp46',
            auto_config: false
      # link for swp47 --> chassis04-lc1-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30602',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31602',
            :libvirt__iface_name => 'swp47',
            auto_config: false
      # link for swp48 --> chassis04-lc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30603',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31603',
            :libvirt__iface_name => 'swp48',
            auto_config: false
      # link for swp49 --> chassis03-fc1-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30604',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31604',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> chassis03-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30605',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31605',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30606',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31606',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis01-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30607',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31607',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> netq-ts:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30608',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31608',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis01-lc2-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30609',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31609',
            :libvirt__iface_name => 'swp54',
            auto_config: false
      # link for swp55 --> chassis03-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30610',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31610',
            :libvirt__iface_name => 'swp55',
            auto_config: false
      # link for swp56 --> chassis01-lc2-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30611',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31611',
            :libvirt__iface_name => 'swp56',
            auto_config: false
      # link for swp57 --> chassis01-lc3-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30612',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31612',
            :libvirt__iface_name => 'swp57',
            auto_config: false
      # link for swp58 --> chassis01-lc3-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30613',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31613',
            :libvirt__iface_name => 'swp58',
            auto_config: false
      # link for swp59 --> chassis02-fc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30614',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31614',
            :libvirt__iface_name => 'swp59',
            auto_config: false
      # link for swp60 --> chassis04-lc4-1:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30615',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31615',
            :libvirt__iface_name => 'swp60',
            auto_config: false
      # link for swp61 --> chassis04-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30616',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31616',
            :libvirt__iface_name => 'swp61',
            auto_config: false
      # link for swp62 --> chassis03-lc4-2:eth0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30617',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31617',
            :libvirt__iface_name => 'swp62',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"

# Transfer Bridge File
      device.vm.provision "file", source: "./helper_scripts/auto_mgmt_network/bridge-untagged", destination: "~/bridge-untagged"

    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/oob_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:49 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:49", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4b --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4b", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4d --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4d", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4f --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4f", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:51 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:51", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:53 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:53", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:55 --> swp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:55", NAME="swp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:57 --> swp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:57", NAME="swp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:59 --> swp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:59", NAME="swp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5b --> swp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5b", NAME="swp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5d --> swp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5d", NAME="swp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5f --> swp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5f", NAME="swp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:61 --> swp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:61", NAME="swp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:63 --> swp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:63", NAME="swp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:65 --> swp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:65", NAME="swp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:67 --> swp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:67", NAME="swp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:69 --> swp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:69", NAME="swp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6b --> swp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6b", NAME="swp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6d --> swp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6d", NAME="swp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6f --> swp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6f", NAME="swp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:71 --> swp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:71", NAME="swp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:73 --> swp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:73", NAME="swp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:75 --> swp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:75", NAME="swp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:77 --> swp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:77", NAME="swp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:79 --> swp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:79", NAME="swp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7b --> swp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7b", NAME="swp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7d --> swp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7d", NAME="swp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7f --> swp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7f", NAME="swp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:81 --> swp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:81", NAME="swp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:83 --> swp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:83", NAME="swp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:85 --> swp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:85", NAME="swp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:87 --> swp32"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:87", NAME="swp32", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:89 --> swp33"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:89", NAME="swp33", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8b --> swp34"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8b", NAME="swp34", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8d --> swp35"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8d", NAME="swp35", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8f --> swp36"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8f", NAME="swp36", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:91 --> swp37"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:91", NAME="swp37", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:93 --> swp38"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:93", NAME="swp38", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:95 --> swp39"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:95", NAME="swp39", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:97 --> swp40"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:97", NAME="swp40", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:99 --> swp41"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:99", NAME="swp41", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9b --> swp42"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9b", NAME="swp42", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9d --> swp43"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9d", NAME="swp43", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9f --> swp44"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9f", NAME="swp44", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a1 --> swp45"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a1", NAME="swp45", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a3 --> swp46"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a3", NAME="swp46", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a5 --> swp47"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a5", NAME="swp47", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a7 --> swp48"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a7", NAME="swp48", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a9 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a9", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ab --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ab", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ad --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ad", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:af --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:af", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b1 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b1", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b3 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b3", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b5 --> swp55"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b5", NAME="swp55", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b7 --> swp56"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b7", NAME="swp56", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b9 --> swp57"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b9", NAME="swp57", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bb --> swp58"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bb", NAME="swp58", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bd --> swp59"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bd", NAME="swp59", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bf --> swp60"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bf", NAME="swp60", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c1 --> swp61"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c1", NAME="swp61", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c3 --> swp62"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c3", NAME="swp62", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-1 #####
  config.vm.define "chassis02-lc1-1" do |device|
    
    device.vm.hostname = "chassis02-lc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31557',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30557',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31299',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31201',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31405',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31117',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31204',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31109',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31221',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31460',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31160',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31396',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31075',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31338',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31403',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31409',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31422',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31499',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30237',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:51 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:51", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8e --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8e", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:23 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:23", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:94 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:94", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d6 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d6", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8f --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8f", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:11 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:11", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:93 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:93", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1f --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1f", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2b --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2b", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:44 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:44", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dc --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dc", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d7 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d7", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-1 #####
  config.vm.define "chassis03-lc1-1" do |device|
    
    device.vm.hostname = "chassis03-lc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31558',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30558',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31444',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31192',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31481',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31532',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30554',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31554',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31304',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31105',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31056',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31124',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31231',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31331',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31539',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31052',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31083',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31132',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31310',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30515',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:4e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:4e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:47 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:47", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5a --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5a", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ce --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ce", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f4 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f4", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ca --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ca", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8f --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8f", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:65 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:65", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a3 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a3", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:04 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:04", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:66 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:66", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fc --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fc", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc1-1 #####
  config.vm.define "chassis02-fc1-1" do |device|
    
    device.vm.hostname = "chassis02-fc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31559',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30559',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31299',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30299',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31201',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30201',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31405',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30405',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31117',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30117',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30453',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30137',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30512',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30329',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30218',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30443',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30119',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30251',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30276',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30077',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30190',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30234',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30488',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30400',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30448',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30066',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30099',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30281',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30301',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30126',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30063',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30043',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30279',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30336',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30261',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30112',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30121',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30145',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:50 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:50", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:52 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:52", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:24 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:24", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e7 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e7", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:82 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:82", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8c --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8c", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b1 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b1", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:eb --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:eb", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f3 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f3", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:25 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:25", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:98 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:98", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:79 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:79", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d1 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d1", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c8 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c8", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:78 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:78", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:82 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:82", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c3 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c3", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2e --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2e", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:56 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:56", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f9 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f9", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7c --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7c", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:54 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:54", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2a --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2a", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:07 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:07", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dd --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dd", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ef --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ef", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1f --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1f", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc1-2 #####
  config.vm.define "chassis02-lc1-2" do |device|
    
    device.vm.hostname = "chassis02-lc1-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31560',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30560',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30453',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31453',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30137',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31137',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30512',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31512',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30329',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31329',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31529',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31380',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31009',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31055',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31127',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31255',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31241',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31269',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31356',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31376',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31461',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31423',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30021',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:52 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:52", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:81 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:81", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0e --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0e", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f5 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f5", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:17 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:17", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f1 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f1", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:11 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:11", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fa --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fa", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fa --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fa", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:de --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:de", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:16 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:16", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e9 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e9", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:91 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:91", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:46 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:46", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2a --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2a", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc3-1 #####
  config.vm.define "chassis02-fc3-1" do |device|
    
    device.vm.hostname = "chassis02-fc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31561',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30561',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31160',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30160',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31396',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30396',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31075',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30075',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31338',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30338',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31127',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30127',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31255',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30255',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31241',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30241',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31269',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30269',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30087',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30368',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30079',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30350',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30433',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30290',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30028',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30102',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30054',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30288',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30332',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30510',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30131',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30128',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30057',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30263',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30430',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30505',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30466',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30479',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30363',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30203',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30419',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30157',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:54 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:54", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3d --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3d", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:12 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:12", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:94 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:94", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fb --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fb", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fb --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fb", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:df --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:df", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:17 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:17", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ab --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ab", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:da --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:da", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b6 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b6", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:40 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:40", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c9 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c9", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6a --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6a", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3c --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3c", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:92 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:92", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f2 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f2", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:03 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:03", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fd --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fd", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:70 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:70", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0b --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0b", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:55 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:55", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e9 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e9", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9c --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9c", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b6 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b6", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d0 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d0", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:93 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:93", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3f --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3f", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:37 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:37", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-1 #####
  config.vm.define "chassis03-lc3-1" do |device|
    
    device.vm.hostname = "chassis03-lc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31562',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30562',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31407',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31441',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31472',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31227',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31107',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31346',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31245',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31216',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31153',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31090',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31335',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30485',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31485',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31469',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31416',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31172',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31447',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30148',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:56 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:56", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:27 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:27", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:69 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:69", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ad --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ad", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e6 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e6", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ac --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ac", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b0 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b0", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:97 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:97", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:39 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:39", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:54 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:54", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:75 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:75", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:25 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:25", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-2 #####
  config.vm.define "chassis02-lc2-2" do |device|
    
    device.vm.hostname = "chassis02-lc2-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31563',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30563',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30276',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31276',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30077',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31077',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30190',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31190',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30234',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31234',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31425',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31322',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31194',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31327',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30433',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31433',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30290',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31290',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30028',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31028',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30102',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31102',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31439',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31490',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31526',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31312',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30462',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:58 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:58", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:24 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:24", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:97 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:97", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:78 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:78", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d0 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d0", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4a --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4a", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7d --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7d", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:80 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:80", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:87 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:87", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5a --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5a", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3f --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3f", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:36 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:36", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c8 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c8", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:65 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:65", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cb --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cb", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:11 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:11", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:94 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:94", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc2-1 #####
  config.vm.define "chassis02-fc2-1" do |device|
    
    device.vm.hostname = "chassis02-fc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31564',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30564',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31204',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30204',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31109',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30109',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31221',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30221',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31460',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30460',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31529',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30529',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31380',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30380',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31009',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30009',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31055',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30055',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30294',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30296',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30383',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30410',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31425',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30425',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31322',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30322',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31194',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30194',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31327',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30327',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30395',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30206',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30319',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30047',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30158',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30475',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31547',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30547',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30123',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30361',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30248',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30325',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30091',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30088',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30455',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30085',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30175',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:95 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:95", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d7 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d7", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:90 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:90", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:18 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:18", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f2 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f2", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:12 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:12", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6c --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6c", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:48 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:48", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4c --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4c", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f8 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f8", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:81 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:81", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:88 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:88", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:10 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:10", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:99 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:99", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:78 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:78", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5c --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5c", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:39 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:39", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ae --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ae", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3b --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3b", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f3 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f3", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cc --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cc", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ed --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ed", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:84 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:84", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b3 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b3", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ad --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ad", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:86 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:86", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a8 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a8", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc2-1 #####
  config.vm.define "chassis02-lc2-1" do |device|
    
    device.vm.hostname = "chassis02-lc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31565',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30565',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30218',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31218',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30443',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31443',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30119',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31119',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30251',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31251',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30294',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31294',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30296',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31296',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30383',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31383',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30410',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31410',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30087',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31087',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30368',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31368',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30079',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31079',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30350',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31350',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31019',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31348',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31286',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31250',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30012',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b0 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b0", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ea --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ea", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f2 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f2", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:47 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:47", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:aa --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:aa", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:25 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:25", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f0 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f0", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:18 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:18", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-1 #####
  config.vm.define "chassis04-lc3-1" do |device|
    
    device.vm.hostname = "chassis04-lc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31566',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30566',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31265',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31048',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31260',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31305',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31161',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31436',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31222',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31072',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31459',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31240',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31492',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31036',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31049',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31095',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31213',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31546',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30225',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:5e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:5e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0e --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0e", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:04 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:04", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5f --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5f", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b8 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b8", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8d --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8d", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cf --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cf", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:46 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:46", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5f --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5f", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ba --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ba", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a6 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a6", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:38 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:38", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bf --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bf", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc1-1 #####
  config.vm.define "chassis04-fc1-1" do |device|
    
    device.vm.hostname = "chassis04-fc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31567',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30567',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30385',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30104',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30271',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30065',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30377',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30353',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30352',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30392',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30504',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30179',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30375',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30398',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30514',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30324',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30521',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30491',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31265',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30265',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31048',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30048',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31260',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30260',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31305',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30305',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30364',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30343',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30291',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30452',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30187',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30142',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30397',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30093',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30074',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30138',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30144',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30489',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:60 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:60", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fc --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fc", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cd --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cd", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1b --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1b", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:80 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:80", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ec --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ec", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bc --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bc", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ba --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ba", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:63 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:63", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e8 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e8", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:16 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:16", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fa --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fa", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:82 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:82", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:08 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:08", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ce --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ce", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5e --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5e", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:05 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:05", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d2 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d2", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a8 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a8", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:42 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:42", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:80 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:80", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:73 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:73", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:19 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:19", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:14 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:14", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b7 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b7", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:92 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:92", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:11 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:11", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ca --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ca", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc4-1 #####
  config.vm.define "chassis03-fc4-1" do |device|
    
    device.vm.hostname = "chassis03-fc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31568',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30568',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31052',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30052',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31083',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30083',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31132',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30132',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31310',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30310',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30259',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30320',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30285',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30101',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30228',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30094',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30470',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30454',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30478',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30183',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30136',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30257',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31469',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30469',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31416',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30416',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31172',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30172',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31447',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30447',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30098',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30180',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30483',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30017',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30542',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31549',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30549',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31550',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30550',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30067',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30384',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30166',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30215',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30045',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:62 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:62", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:66 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:66", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:05 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:05", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:67 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:67", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:03 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:03", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7a --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7a", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:36 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:36", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a4 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a4", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:84 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:84", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6b --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6b", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ff --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ff", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a2 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a2", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:55 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:55", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:76 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:76", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c1 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c1", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:65 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:65", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:be --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:be", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:22 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:22", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:31 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:31", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3f --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3f", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:41 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:41", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:84 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:84", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fa --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fa", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:49 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:49", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ab --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ab", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:58 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:58", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-1 #####
  config.vm.define "chassis04-lc2-1" do |device|
    
    device.vm.hostname = "chassis04-lc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31573',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30573',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30504',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31504',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30179',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31179',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30375',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31375',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30398',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31398',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31235',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31223',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31197',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31178',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31152',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31482',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31401',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31174',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31097',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31073',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31198',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31031',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30497',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e6 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e6", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:62 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:62", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:15 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:15", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ba --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ba", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:86 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:86", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:60 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:60", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2c --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2c", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bb --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bb", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:58 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:58", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:be --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:be", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:88 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:88", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:da --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:da", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-1 #####
  config.vm.define "chassis03-lc2-1" do |device|
    
    device.vm.hostname = "chassis03-lc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31574',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30574',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31249',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31520',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31503',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31181',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31524',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31089',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31005',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31205',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31374',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31440',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31362',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31051',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30228',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31228',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30094',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31094',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30470',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31470',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30454',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31454',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30284',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ee --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ee", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:05 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:05", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e4 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e4", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:66 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:66", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ae --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ae", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:09 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:09", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:96 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:96", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:67 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:67", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cd --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cd", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:63 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:63", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b8 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b8", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a3 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a3", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:83 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:83", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:34 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:34", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc4-1 #####
  config.vm.define "chassis01-fc4-1" do |device|
    
    device.vm.hostname = "chassis01-fc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31576',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30576',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30096',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30508',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30378',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30078',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30341',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30412',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30165',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30522',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30253',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30456',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30039',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30114',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30484',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30168',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30493',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30196',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30349',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30129',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30002',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30540',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30381',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30386',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30139',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30298',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30474',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30146',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30226',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30185',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30025',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30477',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30008',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30321',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:72 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:72", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bd --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bd", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ee --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ee", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ee --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ee", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9a --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9a", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a4 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a4", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:32 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:32", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:47 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:47", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f7 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f7", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:88 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:88", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c0 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c0", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d2 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d2", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:85 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:85", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b4 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b4", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ff --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ff", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:04 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:04", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f4 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f4", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fe --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fe", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:13 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:13", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:50 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:50", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ac --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ac", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:21 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:21", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c1 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c1", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6f --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6f", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:32 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:32", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b2 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b2", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:10 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:10", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7c --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7c", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc1-1 #####
  config.vm.define "chassis01-fc1-1" do |device|
    
    device.vm.hostname = "chassis01-fc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31577',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30577',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30254',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30509',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30434',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30182',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30495',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30302',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30023',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30420',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30318',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30317',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30360',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30295',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30486',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30390',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30110',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30402',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30437',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30125',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30494',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30426',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30471',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30372',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30313',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30037',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30042',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30534',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30151',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30465',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30337',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30446',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30003',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30438',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:74 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:74", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f0 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f0", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:69 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:69", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:58 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:58", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2e --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2e", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:41 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:41", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:76 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:76", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:74 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:74", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ca --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ca", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:06 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:06", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d9 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d9", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:62 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:62", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f7 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f7", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d4 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d4", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4d --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4d", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a6 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a6", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e2 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e2", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6d --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6d", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:49 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:49", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:52 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:52", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:21 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:21", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2b --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2b", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9c --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9c", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:74 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:74", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:06 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:06", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:64 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:64", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-1 #####
  config.vm.define "chassis02-lc3-1" do |device|
    
    device.vm.hostname = "chassis02-lc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31578',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30578',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30488',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31488',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30400',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31400',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30448',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31448',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30066',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31066',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30395',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31395',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30206',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31206',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30319',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31319',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30047',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31047',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30054',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31054',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30288',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31288',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30332',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31332',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30510',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31510',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31061',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31134',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ca",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31103',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31394',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30496',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:76 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:76", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c7 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c7", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:19 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:19", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:77 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:77", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:81 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:81", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0f --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0f", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:98 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:98", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:77 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:77", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:69 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:69", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3b --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3b", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:91 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:91", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:77 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:77", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:08 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:08", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ca --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ca", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0d --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0d", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d8 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d8", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc3-2 #####
  config.vm.define "chassis04-lc3-2" do |device|
    
    device.vm.hostname = "chassis04-lc3-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31579',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30579',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30364',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31364',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30343',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31343',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30291',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31291',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30452',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31452',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31365',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31236',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31518',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31370',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31355',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31266',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31210',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31283',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31345',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31016',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31173',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30551',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31551',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30449',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:78 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:78", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d1 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d1", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a7 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a7", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:41 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:41", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d3 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d3", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d4 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d4", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:01 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:01", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dd --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dd", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:10 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:10", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:31 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:31", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ab --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ab", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1f --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1f", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:56 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:56", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:42 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:42", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7a --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7a", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc1-2 #####
  config.vm.define "chassis03-lc1-2" do |device|
    
    device.vm.hostname = "chassis03-lc1-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31580',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30580',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31282',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31326',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31212',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31004',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31113',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31458',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31020',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31414',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31366',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31502',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31528',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31389',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30259',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31259',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30320',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31320',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30285',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31285',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30101',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31101',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30314',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2f --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2f", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:85 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:85", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a4 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a4", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:07 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:07", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:de --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:de", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:27 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:27", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:35 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:35", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d5 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d5", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e2 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e2", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:15 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:15", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:03 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:03", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:02 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:02", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:79 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:79", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:35 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:35", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6f --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6f", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc3-1 #####
  config.vm.define "chassis01-fc3-1" do |device|
    
    device.vm.hostname = "chassis01-fc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31581',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30581',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30421',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30533',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30393',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30507',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30080',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30230',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30176',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30207',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30001',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30467',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30232',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30432',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30247',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30013',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30032',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30450',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30024',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30030',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30445',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30339',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30188',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30315',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30328',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30243',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30122',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30133',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30233',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30256',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30163',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30169',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30106',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30273',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:43 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:43", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ec --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ec", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c9 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c9", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5d --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5d", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9b --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9b", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:02 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:02", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cd --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cd", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:eb --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:eb", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:30 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:30", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3b --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3b", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:72 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:72", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a0 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a0", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:75 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:75", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:71 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:71", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8a --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8a", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e3 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e3", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f1 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f1", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:07 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:07", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cf --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cf", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fd --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fd", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:43 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:43", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4f --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4f", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d1 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d1", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1f --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1f", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-1 #####
  config.vm.define "chassis02-lc4-1" do |device|
    
    device.vm.hostname = "chassis02-lc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31582',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30582',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30063',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31063',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30043',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31043',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30279',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31279',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30336',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31336',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30361',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31361',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30248',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31248',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30325',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31325',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30091',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31091',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30430',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31430',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30505',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31505',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30466',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31466',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30479',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31479',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31258',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31451',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31289',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31044',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:7e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:7e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:53 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:53", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:29 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:29", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:99 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:99", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cb --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cb", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ec --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ec", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:83 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:83", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:54 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:54", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e8 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e8", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:00 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:00", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7d --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7d", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:55 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:55", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc4-2 #####
  config.vm.define "chassis02-lc4-2" do |device|
    
    device.vm.hostname = "chassis02-lc4-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31583',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30583',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30261',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31261',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30112',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31112',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ee",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30121',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31121',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30145',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31145',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30088',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31088',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30455',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31455',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30085',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31085',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30175',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31175',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30363',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31363',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30203',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31203',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30419',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31419',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30157',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31157',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31195',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31391',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31418',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31164',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:80 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:80", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:06 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:06", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:dc --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:dc", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ee --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ee", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ac --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ac", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:85 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:85", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a7 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a7", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:cf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:cf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:92 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:92", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:36 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:36", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:82 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:82", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:07 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:07", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:44 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:44", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc3-2 #####
  config.vm.define "chassis03-lc3-2" do |device|
    
    device.vm.hostname = "chassis03-lc3-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31585',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30585',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31369',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31442',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31209',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31062',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31108',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31308',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31333',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31238',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31424',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31307',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31244',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31306',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30098',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31098',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30180',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31180',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30483',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31483',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30017',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31017',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30511',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:84 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:84", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:db --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:db", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6b --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6b", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9e --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9e", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:79 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:79", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d4 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d4", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:62 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:62", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:93 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:93", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d8 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d8", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:48 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:48", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:60 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:60", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e4 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e4", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c0 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c0", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:64 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:64", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bd --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bd", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:21 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:21", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f4 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f4", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc3-1 #####
  config.vm.define "chassis04-fc3-1" do |device|
    
    device.vm.hostname = "chassis04-fc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31586',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30586',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30519',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30541',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30297',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30219',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30411',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31553',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30553',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30162',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30457',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31152',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30152',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31482',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30482',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31401',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30401',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31174',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30174',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30022',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30347',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30184',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30084',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31459',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30459',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31240',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30240',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31492',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30492',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31036',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30036',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31355',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30355',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:11",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31266',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30266',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31210',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30210',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31283',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30283',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:54",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30300',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30270',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30501',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30120',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30011',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30344',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30543',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30214',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:86 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:86", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:04 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:04", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2f --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2f", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4e --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4e", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b3 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b3", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:30 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:30", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:46 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:46", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:41 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:41", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2c --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2c", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b0 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b0", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8e --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8e", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:dd --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:dd", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d0 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d0", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:47 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:47", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c0 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c0", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:11 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:11", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a1 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a1", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:32 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:32", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:54 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:54", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:19 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:19", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e1 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e1", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ed --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ed", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:16 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:16", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:aa --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:aa", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:33 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:33", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a9 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a9", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc2-2 #####
  config.vm.define "chassis04-lc2-2" do |device|
    
    device.vm.hostname = "chassis04-lc2-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp32
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31587',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30587',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30514',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31514',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:81",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30324',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31324',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:07",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30521',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31521',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30491',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31491',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31357',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31246',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31186',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31100',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30022',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31022',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30347',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31347',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30184',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31184',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30084',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31084',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31523',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31516',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31189',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31358',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:65",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30309',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:88 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:88", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:81 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:81", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:07 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:07", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c3 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c3", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e8 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e8", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:70 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:70", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c4 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c4", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2b --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2b", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:af --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:af", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a5 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a5", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0b --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0b", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fd --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fd", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:76 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:76", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:65 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:65", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-fc2-1 #####
  config.vm.define "chassis01-fc2-1" do |device|
    
    device.vm.hostname = "chassis01-fc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp33
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31588',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30588',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30476',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30268',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:69",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30311',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30278',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30544',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30517',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30116',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30292',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30264',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30007',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30342',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30431',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30242',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30027',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30211',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30428',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis01-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30200',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis01-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30293',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis01-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30135',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis01-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30092',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis01-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30071',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis01-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30404',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis01-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30058',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis01-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30029',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis01-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30473',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis01-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30406',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis01-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30239',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis01-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30167',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis01-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30427',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis01-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30267',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis01-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30388',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis01-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30034',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b0 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b0", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:15 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:15", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:69 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:69", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:28 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:28", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:35 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:35", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:00 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:00", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:44 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:44", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a6 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a6", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:57 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:57", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e1 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e1", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:35 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:35", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a3 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a3", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:51 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:51", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8d --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8d", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:46 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:46", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0b --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0b", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b5 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b5", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8c --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8c", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:22 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:22", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:72 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:72", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:39 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:39", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:aa --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:aa", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:26 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:26", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:db --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:db", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4b --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4b", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4f --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4f", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:13 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:13", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:02 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:02", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:43 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:43", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc2-1 #####
  config.vm.define "chassis04-fc2-1" do |device|
    
    device.vm.hostname = "chassis04-fc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp34
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31589',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30589',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30118',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30171',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30287',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30480',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30330',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30463',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30141',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30170',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31235',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30235',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31223',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30223',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31197',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30197',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31178',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30178',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31357',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30357',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31246',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30246',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31186',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30186',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31100',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30100',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31161',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30161',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31436',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30436',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31222',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30222',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31072',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30072',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31365',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30365',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31236',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30236',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31518',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30518',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31370',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30370',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30229',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30538',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30487',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30082',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30040',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30429',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31548',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30548',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30527',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e9 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e9", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:53 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:53", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b8 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b8", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:96 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:96", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:17 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:17", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:51 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:51", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d3 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d3", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bb --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bb", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:87 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:87", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:61 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:61", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c4 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c4", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e9 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e9", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:71 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:71", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c5 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c5", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:60 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:60", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b9 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b9", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d4 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d4", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d5 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d5", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:02 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:02", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:de --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:de", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c7 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c7", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:29 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:29", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c6 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c6", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a2 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a2", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4f --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4f", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:53 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:53", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:14 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:14", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-fc4-1 #####
  config.vm.define "chassis04-fc4-1" do |device|
    
    device.vm.hostname = "chassis04-fc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp35
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:8e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31590',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30590',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30359',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:35",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30156',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30525',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30545',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30130',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30199',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30415',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30217',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31097',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30097',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31073',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30073',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31198',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30198',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31031',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30031',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31523',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30523',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31516',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30516',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:77",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31189',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30189',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31358',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30358',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis04-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:60",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31049',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30049',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis04-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31095',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30095',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis04-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31213',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30213',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis04-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31546',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30546',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis04-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31345',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30345',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis04-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31016',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30016',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis04-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31173',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30173',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis04-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31551',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30551',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis04-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30191',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis04-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30177',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis04-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30351',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis04-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30280',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis04-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30367',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis04-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30220',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis04-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30010',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis04-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30143',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:8e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:8e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:35 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:35", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:10 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:10", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:37 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:37", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:01 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:01", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8b --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8b", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:38 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:38", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:af --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:af", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bf --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bf", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:90 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:90", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:89 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:89", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0c --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0c", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fe --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fe", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:77 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:77", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c6 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c6", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:60 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:60", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bb --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bb", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a7 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a7", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:39 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:39", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ac --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ac", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:20 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:20", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:57 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:57", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:43 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:43", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7b --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7b", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5f --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5f", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b8 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b8", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2c --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2c", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d8 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d8", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b5 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b5", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:14 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:14", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-lc3-2 #####
  config.vm.define "chassis02-lc3-2" do |device|
    
    device.vm.hostname = "chassis02-lc3-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp42
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31597',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30597',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30099',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31099',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30281',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31281',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:55",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30301',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31301',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30126',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31126',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30158',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31158',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30475',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31475',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30547',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31547',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30123',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31123',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30131',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31131',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30128',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31128',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30057',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31057',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30263',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31263',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31531',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31387',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31115',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31070',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30262',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9c --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9c", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:c2 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:c2", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:55 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:55", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f8 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f8", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:38 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:38", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ad --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ad", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3a --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3a", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f2 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f2", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:02 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:02", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fc --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fc", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6f --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6f", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1a --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1a", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ff --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ff", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e2 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e2", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:89 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:89", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:09 --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:09", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc2-1 #####
  config.vm.define "chassis03-fc2-1" do |device|
    
    device.vm.hostname = "chassis03-fc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp43
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31598',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30598',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31554',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30554',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31304',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30304',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31105',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30105',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31056',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30056',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31113',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30113',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31458',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30458',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31020',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30020',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31414',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30414',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31524',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30524',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31089',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30089',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31005',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30005',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31205',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30205',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30275',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:88",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30069',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30147',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30340',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31107',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30107',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31346',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30346',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31245',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30245',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ad",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31216',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30216',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31108',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30108',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31308',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30308',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31333',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30333',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31238',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30238',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30076',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30371',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30059',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30202',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30140',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30155',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30379',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30038',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9e --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9e", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:48 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:48", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5b --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5b", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cf --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cf", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:6e --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:6e", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:df --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:df", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:8c --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:8c", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:28 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:28", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:36 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:36", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:af --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:af", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0a --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0a", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:97 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:97", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:23 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:23", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:88 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:88", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:23 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:23", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a2 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a2", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d3 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d3", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ae --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ae", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e7 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e7", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ad --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ad", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d5 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d5", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:63 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:63", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:94 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:94", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d9 --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d9", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:96 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:96", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e0 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e0", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:74 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:74", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:91 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:91", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:15 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:15", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:33 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:33", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f0 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f0", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4b --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4b", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-2 #####
  config.vm.define "chassis01-lc1-2" do |device|
    
    device.vm.hostname = "chassis01-lc1-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp44
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31599',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30599',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30495',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31495',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30302',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31302',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30023',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31023',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30420',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31420',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30544',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31544',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ff",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30517',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31517',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30116',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31116',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:43",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30292',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31292',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30080',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31080',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30230',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31230',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30176',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31176',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30207',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31207',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30341',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31341',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30412',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31412',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:46",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30165',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31165',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30522',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31522',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30536',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:57 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:57", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2d --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2d", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:40 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:40", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:34 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:34", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ff --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ff", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e4 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e4", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:43 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:43", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9d --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9d", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c8 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c8", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9a --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9a", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:31 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:31", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:46 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:46", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:09 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:09", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:25 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:25", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc3-1 #####
  config.vm.define "chassis03-fc3-1" do |device|
    
    device.vm.hostname = "chassis03-fc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp45
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31600',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30600',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31124',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30124',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31231',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30231',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31331',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30331',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31539',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30539',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31366',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30366',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31502',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30502',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31528',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30528',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:04",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31389',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30389',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31374',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30374',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31440',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30440',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31362',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30362',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31051',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30051',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30413',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:41",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30033',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30208',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30018',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31153',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30153',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31090',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30090',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31335',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30335',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31485',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30485',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31424',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30424',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31307',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30307',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31244',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30244',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:5f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31306',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30306',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30193',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:80",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30323',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:76",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30060',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:5a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30046',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30354',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30399',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30150',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30015',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cb --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cb", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:90 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:90", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e3 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e3", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:16 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:16", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:04 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:04", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e6 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e6", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:68 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:68", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ce --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ce", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:64 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:64", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:34 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:34", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:41 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:41", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9d --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9d", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:24 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:24", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2f --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2f", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b1 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b1", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:98 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:98", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c2 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c2", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:49 --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:49", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:61 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:61", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e5 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e5", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:5f --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:5f", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7f --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7f", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:80 --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:80", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:76 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:76", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:5a --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:5a", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:be --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:be", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:18 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:18", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:29 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:29", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc1-1 #####
  config.vm.define "chassis01-lc1-1" do |device|
    
    device.vm.hostname = "chassis01-lc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp46
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31601',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30601',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30254',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31254',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30509',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31509',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30434',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31434',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30182',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31182',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:af",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30476',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31476',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30268',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31268',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30311',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31311',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30278',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31278',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30421',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31421',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30533',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31533',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30393',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31393',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30507',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31507',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30096',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31096',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30508',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31508',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ed",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30378',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31378',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30078',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31078',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30154',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f8 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f8", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ef --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ef", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:68 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:68", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:af --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:af", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:14 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:14", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:68 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:68", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:27 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:27", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:42 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:42", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0b --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0b", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:eb --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:eb", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:bc --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:bc", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ed --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ed", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ed --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ed", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:99 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:99", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:31 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:31", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-2 #####
  config.vm.define "chassis04-lc1-2" do |device|
    
    device.vm.hostname = "chassis04-lc1-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp47
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31602',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30602',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:eb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30377',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31377',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30353',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31353',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30352',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31352',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30392',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31392',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:8d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30330',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31330',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30463',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31463',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:16",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30141',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31141',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30170',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31170',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30411',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31411',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30553',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31553',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30162',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31162',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30457',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31457',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30130',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31130',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30199',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31199',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:37",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30415',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31415',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp7
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30217',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31217',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp2 --> leaf02:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30149',
            :libvirt__iface_name => 'swp2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:eb --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:eb", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bb --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bb", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:09 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:09", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:8d --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:8d", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:95 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:95", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:16 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:16", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:50 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:50", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:45 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:45", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:40 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:40", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:89 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:89", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:00 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:00", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:37 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:37", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ae --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ae", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:27 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:27", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc1-1 #####
  config.vm.define "chassis04-lc1-1" do |device|
    
    device.vm.hostname = "chassis04-lc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp48
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31603',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30603',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30385',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31385',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30104',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31104',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30271',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31271',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30065',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31065',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30118',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31118',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30171',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31171',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:39",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30287',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31287',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30480',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31480',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30519',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31519',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30541',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31541',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30297',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31297',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30219',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31219',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30359',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31359',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30156',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31156',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30525',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31525',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:36",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30545',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31545',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp1 --> leaf01:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30068',
            :libvirt__iface_name => 'swp1',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:a8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:a8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fb --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fb", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cc --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cc", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7f --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7f", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e8 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e8", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:52 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:52", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:39 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:39", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b7 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b7", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:03 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:03", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4d --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4d", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b2 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b2", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c7 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c7", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:34 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:34", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:0f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:0f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:36 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:36", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:86 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:86", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-fc1-1 #####
  config.vm.define "chassis03-fc1-1" do |device|
    
    device.vm.hostname = "chassis03-fc1-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31604',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30604',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-lc1-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31444',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30444',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-lc1-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31192',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30192',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-lc1-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31481',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30481',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-lc1-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31532',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30532',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-lc1-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31282',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30282',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-lc1-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:86",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31326',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30326',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-lc1-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31212',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30212',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-lc1-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31004',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30004',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-lc2-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31249',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30249',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-lc2-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31520',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30520',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-lc2-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31503',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30503',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-lc2-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31181',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30181',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-lc2-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:62",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30050',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-lc2-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30252',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-lc2-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30513',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-lc2-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30014',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis03-lc3-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31407',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30407',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis03-lc3-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31441',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30441',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis03-lc3-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31472',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30472',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis03-lc3-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31227',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30227',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis03-lc3-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:dc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31369',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30369',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis03-lc3-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31442',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30442',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis03-lc3-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31209',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30209',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis03-lc3-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31062',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30062',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis03-lc4-1:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30382',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis03-lc4-1:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30111',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis03-lc4-1:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30468',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis03-lc4-1:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30500',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis03-lc4-2:fp0
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30159',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis03-lc4-2:fp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30272',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis03-lc4-2:fp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30373',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis03-lc4-2:fp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30064',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:aa --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:aa", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:70 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:70", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7d --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7d", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ba --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ba", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:30 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:30", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:86 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:86", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:08 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:08", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ef --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ef", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:06 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:06", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e5 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e5", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:67 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:67", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:62 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:62", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f5 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f5", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f8 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f8", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:28 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:28", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6a --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6a", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a8 --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a8", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c3 --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c3", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:dc --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:dc", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:6c --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:6c", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9f --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9f", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f6 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f6", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:db --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:db", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a0 --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a0", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:df --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:df", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3b --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3b", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1d --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1d", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e4 --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e4", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7e --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7e", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc2-2 #####
  config.vm.define "chassis03-lc2-2" do |device|
    
    device.vm.hostname = "chassis03-lc2-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ac",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31605',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30605',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30050',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31050',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30252',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31252',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30513',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31513',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30014',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31014',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30275',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31275',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30069',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31069',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30147',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31147',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30340',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31340',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30413',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31413',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30033',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31033',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:9c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30208',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31208',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30018',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31018',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30478',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31478',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30183',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31183',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30136',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31136',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30257',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31257',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:27",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30537',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ac --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ac", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:61 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:61", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f4 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f4", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f7 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f7", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1b --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1b", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:22 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:22", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:87 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:87", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:22 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:22", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:33 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:33", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:40 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:40", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:9c --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:9c", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:23 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:23", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6a --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6a", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fe --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fe", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:27 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:27", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-2 #####
  config.vm.define "chassis01-lc4-2" do |device|
    
    device.vm.hostname = "chassis01-lc4-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ae",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31606',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30606',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30337',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31337',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30446',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31446',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30003',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31003',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:63",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30438',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31438',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30427',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31427',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30267',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31267',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30388',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31388',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30034',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31034',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:42",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30163',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31163',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30169',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31169',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30106',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31106',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30273',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31273',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:31",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30025',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31025',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:b1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30477',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31477',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30008',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31008',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30321',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31321',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ae --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ae", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9b --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9b", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:73 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:73", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:05 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:05", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:63 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:63", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:12 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:12", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:01 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:01", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:42 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:42", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:42 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:42", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4e --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4e", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1e --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1e", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:31 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:31", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:b1 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:b1", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0f --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0f", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc4-1 #####
  config.vm.define "chassis01-lc4-1" do |device|
    
    device.vm.hostname = "chassis01-lc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp52
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31607',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30607',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:51",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30042',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31042',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30534',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31534',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30151',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31151',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:99",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30465',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31465',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30473',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31473',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:25",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30406',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31406',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30239',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31239',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30167',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31167',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30122',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31122',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:06",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30133',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31133',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ce",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30233',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31233',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:fc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30256',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31256',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ab",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30474',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31474',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30146',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31146',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30226',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31226',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30185',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31185',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:51 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:51", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:20 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:20", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:2a --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:2a", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:99 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:99", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a9 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a9", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:25 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:25", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:da --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:da", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f0 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f0", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:06 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:06", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ce --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ce", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:fc --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:fc", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ab --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ab", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:20 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:20", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c0 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c0", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:6e --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:6e", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-1 #####
  config.vm.define "chassis01-lc2-1" do |device|
    
    device.vm.hostname = "chassis01-lc2-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp54
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31609',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30609',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30318',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31318',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30317',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31317',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30360',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31360',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:49",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30295',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31295',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30264',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31264',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30007',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31007',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30342',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31342',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30431',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31431',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30001',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31001',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30467',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31467',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30232',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31232',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:58",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30432',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31432',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp8
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30253',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31253',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp9
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:87",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30456',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31456',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp10
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30039',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31039',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp11
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30114',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31114',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp3 --> leaf03:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30464',
            :libvirt__iface_name => 'swp3',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:75 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:75", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:73 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:73", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c9 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c9", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:49 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:49", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:0c --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:0c", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0d --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0d", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:56 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:56", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:01 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:01", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9d --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9d", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:cc --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:cc", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:58 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:58", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f6 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f6", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:87 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:87", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4c --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4c", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e0 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e0", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:98 --> swp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:98", NAME="swp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-1 #####
  config.vm.define "chassis03-lc4-1" do |device|
    
    device.vm.hostname = "chassis03-lc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp55
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31610',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30610',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30382',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31382',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:da",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30111',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31111',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30468',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31468',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:de",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30500',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31500',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30076',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31076',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:df",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30371',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31371',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:73",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30059',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31059',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30202',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31202',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30193',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31193',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:7f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30323',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31323',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:75",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30060',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31060',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30046',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31046',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30542',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31542',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30549',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31549',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:40",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30550',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31550',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30067',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31067',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b6 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b6", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:da --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:da", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:9f --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:9f", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:de --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:de", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:95 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:95", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:df --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:df", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:73 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:73", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:90 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:90", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7e --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7e", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:7f --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:7f", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:75 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:75", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:59 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:59", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:30 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:30", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:40 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:40", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:83 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:83", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc2-2 #####
  config.vm.define "chassis01-lc2-2" do |device|
    
    device.vm.hostname = "chassis01-lc2-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp56
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31611',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30611',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30486',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31486',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:05",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30390',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31390',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:d8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30110',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31110',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30402',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31402',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30242',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31242',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:34",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30027',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31027',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30211',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31211',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30428',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31428',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30247',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31247',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30013',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31013',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30032',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31032',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30450',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31450',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:bf",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30484',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31484',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30168',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31168',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30493',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31493',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:84",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30196',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31196',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp4 --> leaf04:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30334',
            :libvirt__iface_name => 'swp4',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b8 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b8", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c3 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c3", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:05 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:05", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:d8 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:d8", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:1d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:1d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e0 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e0", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:34 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:34", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a2 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a2", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:50 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:50", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:ea --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:ea", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:19 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:19", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3e --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3e", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7b --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7b", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:bf --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:bf", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:4c --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:4c", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d1 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d1", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:84 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:84", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:96 --> swp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:96", NAME="swp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-1 #####
  config.vm.define "chassis01-lc3-1" do |device|
    
    device.vm.hostname = "chassis01-lc3-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp57
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:ba",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31612',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30612',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:61",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30437',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31437',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:f6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30125',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31125',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30494',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31494',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:4c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30426',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31426',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:8c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30200',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31200',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30293',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31293',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:0a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30135',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31135',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30092',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31092',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:2f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30024',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31024',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30030',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31030',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30445',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31445',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30339',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31339',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30349',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31349',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:fe",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30129',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31129',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp18
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:03",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30002',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31002',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp19
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30540',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31540',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp5 --> leaf05:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30081',
            :libvirt__iface_name => 'swp5',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:ba --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:ba", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:61 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:61", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:f6 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:f6", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d3 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d3", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:4c --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:4c", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:8c --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:8c", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:45 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:45", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:0a --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:0a", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b4 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b4", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:2f --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:2f", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:3a --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:3a", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:71 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:71", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:9f --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:9f", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:fe --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:fe", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:03 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:03", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:2c --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:2c", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a0 --> swp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a0", NAME="swp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis01-lc3-2 #####
  config.vm.define "chassis01-lc3-2" do |device|
    
    device.vm.hostname = "chassis01-lc3-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp58
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31613',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30613',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis01-fc1-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:a5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30471',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31471',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis01-fc1-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30372',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31372',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis01-fc1-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30313',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31313',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis01-fc1-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30037',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31037',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis01-fc2-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30071',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31071',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis01-fc2-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30404',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31404',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis01-fc2-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:71",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30058',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31058',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis01-fc2-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30029',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31029',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis01-fc3-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:74",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30188',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31188',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis01-fc3-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30315',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31315',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis01-fc3-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:89",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30328',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31328',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis01-fc3-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:e2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30243',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31243',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis01-fc4-1:fp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30381',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31381',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis01-fc4-1:fp21
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:fd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30386',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31386',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis01-fc4-1:fp22
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30139',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31139',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis01-fc4-1:fp23
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:4f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30298',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31298',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for swp6 --> leaf06:swp51
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30224',
            :libvirt__iface_name => 'swp6',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:bc --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:bc", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:a5 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:a5", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e1 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e1", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:48 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:48", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8b --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8b", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:21 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:21", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:71 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:71", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:38 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:38", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:74 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:74", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:70 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:70", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:89 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:89", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:e2 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:e2", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f3 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f3", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:fd --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:fd", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:12 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:12", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:4f --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:4f", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bd --> swp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bd", NAME="swp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis02-fc4-1 #####
  config.vm.define "chassis02-fc4-1" do |device|
    
    device.vm.hostname = "chassis02-fc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp59
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31614',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30614',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis02-lc1-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31403',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30403',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis02-lc1-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31409',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30409',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis02-lc1-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31422',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30422',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis02-lc1-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:dd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31499',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30499',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis02-lc1-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31356',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30356',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis02-lc1-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31376',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30376',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis02-lc1-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31461',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30461',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis02-lc1-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:47",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31423',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30423',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis02-lc2-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31019',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30019',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis02-lc2-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31348',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30348',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis02-lc2-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:38",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31286',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30286',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis02-lc2-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:f1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31250',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30250',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis02-lc2-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31439',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30439',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis02-lc2-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:cc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31490',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30490',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis02-lc2-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:12",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31526',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30526',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis02-lc2-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31312',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30312',
            :libvirt__iface_name => 'fp15',
            auto_config: false
      # link for fp16 --> chassis02-lc3-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:78",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31061',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30061',
            :libvirt__iface_name => 'fp16',
            auto_config: false
      # link for fp17 --> chassis02-lc3-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:09",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31134',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30134',
            :libvirt__iface_name => 'fp17',
            auto_config: false
      # link for fp18 --> chassis02-lc3-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:cb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31103',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30103',
            :libvirt__iface_name => 'fp18',
            auto_config: false
      # link for fp19 --> chassis02-lc3-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:0e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31394',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30394',
            :libvirt__iface_name => 'fp19',
            auto_config: false
      # link for fp20 --> chassis02-lc3-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:1b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31531',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30531',
            :libvirt__iface_name => 'fp20',
            auto_config: false
      # link for fp21 --> chassis02-lc3-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:00",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31387',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30387',
            :libvirt__iface_name => 'fp21',
            auto_config: false
      # link for fp22 --> chassis02-lc3-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31115',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30115',
            :libvirt__iface_name => 'fp22',
            auto_config: false
      # link for fp23 --> chassis02-lc3-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:8a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31070',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30070',
            :libvirt__iface_name => 'fp23',
            auto_config: false
      # link for fp24 --> chassis02-lc4-1:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31258',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30258',
            :libvirt__iface_name => 'fp24',
            auto_config: false
      # link for fp25 --> chassis02-lc4-1:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:7e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31451',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30451',
            :libvirt__iface_name => 'fp25',
            auto_config: false
      # link for fp26 --> chassis02-lc4-1:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:3e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31289',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30289',
            :libvirt__iface_name => 'fp26',
            auto_config: false
      # link for fp27 --> chassis02-lc4-1:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:56",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31044',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30044',
            :libvirt__iface_name => 'fp27',
            auto_config: false
      # link for fp28 --> chassis02-lc4-2:fp12
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:83",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31195',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30195',
            :libvirt__iface_name => 'fp28',
            auto_config: false
      # link for fp29 --> chassis02-lc4-2:fp13
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31391',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30391',
            :libvirt__iface_name => 'fp29',
            auto_config: false
      # link for fp30 --> chassis02-lc4-2:fp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31418',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30418',
            :libvirt__iface_name => 'fp30',
            auto_config: false
      # link for fp31 --> chassis02-lc4-2:fp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31164',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30164',
            :libvirt__iface_name => 'fp31',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:be --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:be", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:20 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:20", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:45 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:45", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:dd --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:dd", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:c2 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:c2", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ea --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ea", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:92 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:92", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:47 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:47", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:26 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:26", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b2 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b2", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:38 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:38", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:f1 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:f1", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:66 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:66", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:cc --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:cc", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:12 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:12", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:78 --> fp16"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:78", NAME="fp16", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:09 --> fp17"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:09", NAME="fp17", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:cb --> fp18"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:cb", NAME="fp18", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:0e --> fp19"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:0e", NAME="fp19", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:1b --> fp20"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:1b", NAME="fp20", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:00 --> fp21"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:00", NAME="fp21", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:e3 --> fp22"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:e3", NAME="fp22", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:8a --> fp23"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:8a", NAME="fp23", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:01 --> fp24"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:01", NAME="fp24", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:7e --> fp25"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:7e", NAME="fp25", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:3e --> fp26"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:3e", NAME="fp26", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:56 --> fp27"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:56", NAME="fp27", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:83 --> fp28"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:83", NAME="fp28", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:08 --> fp29"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:08", NAME="fp29", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3d --> fp30"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3d", NAME="fp30", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:45 --> fp31"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:45", NAME="fp31", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-1 #####
  config.vm.define "chassis04-lc4-1" do |device|
    
    device.vm.hostname = "chassis04-lc4-1" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp60
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31615',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30615',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30187',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31187',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30142',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31142',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30397',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31397',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:b6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30093',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31093',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:c6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30229',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31229',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30538',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31538',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c5",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30487',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31487',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a1",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30082',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31082',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:53",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30300',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31300',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:18",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30270',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31270',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:e0",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30501',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31501',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:ec",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30120',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31120',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp24
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:7a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30191',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31191',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp25
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30177',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31177',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp26
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:b7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30351',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31351',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp27
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:2b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30280',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31280',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c0 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c0", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:72 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:72", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:18 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:18", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:13 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:13", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:b6 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:b6", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:c6 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:c6", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:28 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:28", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c5 --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c5", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a1 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a1", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:53 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:53", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:18 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:18", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:e0 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:e0", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:ec --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:ec", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:7a --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:7a", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:5e --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:5e", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:b7 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:b7", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:2b --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:2b", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis04-lc4-2 #####
  config.vm.define "chassis04-lc4-2" do |device|
    
    device.vm.hostname = "chassis04-lc4-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp61
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31616',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30616',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis04-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:91",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30074',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31074',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis04-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:10",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30138',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31138',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis04-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30144',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31144',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis04-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:c9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30489',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31489',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis04-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30040',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31040',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis04-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:52",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30429',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31429',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis04-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:3c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30548',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31548',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis04-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30527',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31527',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis04-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:15",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30011',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31011',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis04-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30344',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31344',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis04-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30543',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31543',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis04-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:a8",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30214',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31214',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis04-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30367',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31367',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis04-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:b4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30220',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31220',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis04-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:13",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30010',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31010',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis04-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:1a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30143',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31143',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:91 --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:91", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:10 --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:10", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1c --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1c", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:c9 --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:c9", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4e --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4e", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:52 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:52", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:3c --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:3c", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:13 --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:13", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:15 --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:15", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:a9 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:a9", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:32 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:32", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:a8 --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:a8", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:d7 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:d7", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:b4 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:b4", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:13 --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:13", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:1a --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:1a", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for chassis03-lc4-2 #####
  config.vm.define "chassis03-lc4-2" do |device|
    
    device.vm.hostname = "chassis03-lc4-2" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp62
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:c4",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31617',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30617',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for fp0 --> chassis03-fc1-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:3a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30159',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31159',
            :libvirt__iface_name => 'fp0',
            auto_config: false
      # link for fp1 --> chassis03-fc1-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:1c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30272',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31272',
            :libvirt__iface_name => 'fp1',
            auto_config: false
      # link for fp2 --> chassis03-fc1-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:e3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30373',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31373',
            :libvirt__iface_name => 'fp2',
            auto_config: false
      # link for fp3 --> chassis03-fc1-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:7d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30064',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31064',
            :libvirt__iface_name => 'fp3',
            auto_config: false
      # link for fp4 --> chassis03-fc2-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:14",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30140',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31140',
            :libvirt__iface_name => 'fp4',
            auto_config: false
      # link for fp5 --> chassis03-fc2-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:32",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30155',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31155',
            :libvirt__iface_name => 'fp5',
            auto_config: false
      # link for fp6 --> chassis03-fc2-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:ef",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30379',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31379',
            :libvirt__iface_name => 'fp6',
            auto_config: false
      # link for fp7 --> chassis03-fc2-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:4a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30038',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31038',
            :libvirt__iface_name => 'fp7',
            auto_config: false
      # link for fp8 --> chassis03-fc3-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:bd",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30354',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31354',
            :libvirt__iface_name => 'fp8',
            auto_config: false
      # link for fp9 --> chassis03-fc3-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30399',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31399',
            :libvirt__iface_name => 'fp9',
            auto_config: false
      # link for fp10 --> chassis03-fc3-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:28",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30150',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31150',
            :libvirt__iface_name => 'fp10',
            auto_config: false
      # link for fp11 --> chassis03-fc3-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:1d",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30015',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31015',
            :libvirt__iface_name => 'fp11',
            auto_config: false
      # link for fp12 --> chassis03-fc4-1:fp28
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:f9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30384',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31384',
            :libvirt__iface_name => 'fp12',
            auto_config: false
      # link for fp13 --> chassis03-fc4-1:fp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:48",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30166',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31166',
            :libvirt__iface_name => 'fp13',
            auto_config: false
      # link for fp14 --> chassis03-fc4-1:fp30
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:aa",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30215',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31215',
            :libvirt__iface_name => 'fp14',
            auto_config: false
      # link for fp15 --> chassis03-fc4-1:fp31
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:57",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30045',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31045',
            :libvirt__iface_name => 'fp15',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:c4 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:c4", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:3a --> fp0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:3a", NAME="fp0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:1c --> fp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:1c", NAME="fp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:e3 --> fp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:e3", NAME="fp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:7d --> fp3"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:7d", NAME="fp3", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:14 --> fp4"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:14", NAME="fp4", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:32 --> fp5"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:32", NAME="fp5", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:ef --> fp6"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:ef", NAME="fp6", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:4a --> fp7"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:4a", NAME="fp7", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:bd --> fp8"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:bd", NAME="fp8", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:17 --> fp9"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:17", NAME="fp9", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:28 --> fp10"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:28", NAME="fp10", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:1d --> fp11"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:1d", NAME="fp11", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:f9 --> fp12"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:f9", NAME="fp12", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:48 --> fp13"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:48", NAME="fp13", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:aa --> fp14"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:aa", NAME="fp14", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:57 --> fp15"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:57", NAME="fp15", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf06 #####
  config.vm.define "leaf06" do |device|
    
    device.vm.hostname = "leaf06" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp36
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:90",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31591',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30591',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server05:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:a9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30086',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server06:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30026',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf05:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:2a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30408',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf05:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30053',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:bc",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30224',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31224',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:08",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30262',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31262',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:f3",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30511',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31511',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc3-2:swp6
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:79",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30449',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31449',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:90 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:90", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:a9 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:a9", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:33 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:33", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:2a --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:2a", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:68 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:68", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:bc --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:bc", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:08 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:08", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:f3 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:f3", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:79 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:79", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf04 #####
  config.vm.define "leaf04" do |device|
    
    device.vm.hostname = "leaf04" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp37
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:92",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31592',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30592',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server03:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:59",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30303',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server04:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:5e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30435',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf03:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:23",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30535',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf03:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:21",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30274',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:95",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30334',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31334',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:93",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30462',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31462',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30537',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31537',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc2-2:swp4
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30309',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31309',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:92 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:92", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:59 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:59", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:5e --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:5e", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:23 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:23", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:21 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:21", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:95 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:95", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:93 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:93", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:26 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:26", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:64 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:64", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf05 #####
  config.vm.define "leaf05" do |device|
    
    device.vm.hostname = "leaf05" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp38
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:94",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31593',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30593',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server05:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31552',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30552',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server06:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:ea",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30506',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf06:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30408',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31408',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf06:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:67",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30053',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31053',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:9f",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30081',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31081',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d7",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30496',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31496',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30148',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31148',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc3-1:swp5
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:be",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30225',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31225',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:94 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:94", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:44 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:44", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:ea --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:ea", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:29 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:29", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:67 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:67", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:9f --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:9f", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d7 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d7", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:24 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:24", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:be --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:be", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf02 #####
  config.vm.define "leaf02" do |device|
    
    device.vm.hostname = "leaf02" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp39
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:96",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31594',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30594',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server01:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:19",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30530',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server02:eth2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:50",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30041',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf01:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0c",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30006',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf01:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:45",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30035',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:24",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30536',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31536',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:29",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30021',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31021',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:6e",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30314',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31314',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc1-2:swp2
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30149',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31149',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:96 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:96", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:19 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:19", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:50 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:50", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0c --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0c", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:45 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:45", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:24 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:24", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:29 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:29", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:6e --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:6e", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:26 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:26", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf03 #####
  config.vm.define "leaf03" do |device|
    
    device.vm.hostname = "leaf03" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp40
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:98",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31595',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30595',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server03:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:72",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30316',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server04:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:db",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30498',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf04:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:22",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30535',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31535',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf04:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:20",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30274',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31274',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:97",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30464',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31464',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:17",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30012',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31012',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:33",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30284',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31284',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc2-1:swp3
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:d9",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30497',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31497',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:98 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:98", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:72 --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:72", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:db --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:db", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:22 --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:22", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:20 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:20", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:97 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:97", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:17 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:17", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:33 --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:33", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:d9 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:d9", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for leaf01 #####
  config.vm.define "leaf01" do |device|
    
    device.vm.hostname = "leaf01" 
    
    device.vm.box = "CumulusCommunity/cumulus-vx"
    device.vm.box_version = "3.4.3"

    device.vm.provider :libvirt do |v|
      v.memory = 768
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp41
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:9a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31596',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30596',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for swp1 --> server01:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:3b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30417',
            :libvirt__iface_name => 'swp1',
            auto_config: false
      # link for swp2 --> server02:eth1
      device.vm.network "private_network",
            :mac => "44:38:39:00:02:26",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30277',
            :libvirt__iface_name => 'swp2',
            auto_config: false
      # link for swp49 --> leaf02:swp49
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:0b",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30006',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31006',
            :libvirt__iface_name => 'swp49',
            auto_config: false
      # link for swp50 --> leaf02:swp50
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:44",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30035',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31035',
            :libvirt__iface_name => 'swp50',
            auto_config: false
      # link for swp51 --> chassis01-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:30",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30154',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31154',
            :libvirt__iface_name => 'swp51',
            auto_config: false
      # link for swp52 --> chassis02-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:01:d6",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30237',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31237',
            :libvirt__iface_name => 'swp52',
            auto_config: false
      # link for swp53 --> chassis03-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:03:fb",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30515',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31515',
            :libvirt__iface_name => 'swp53',
            auto_config: false
      # link for swp54 --> chassis04-lc1-1:swp1
      device.vm.network "private_network",
            :mac => "44:38:39:00:00:85",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30068',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31068',
            :libvirt__iface_name => 'swp54',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    #Copy over Topology.dot File
    device.vm.provision "file", source: "topology.dot", destination: "~/topology.dot"
    device.vm.provision :shell, privileged: false, inline: "sudo mv ~/topology.dot /etc/ptm.d/topology.dot"


    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_switch_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:9a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:9a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:3b --> swp1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:3b", NAME="swp1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:02:26 --> swp2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:02:26", NAME="swp2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:0b --> swp49"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:0b", NAME="swp49", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:44 --> swp50"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:44", NAME="swp50", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:30 --> swp51"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:30", NAME="swp51", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:01:d6 --> swp52"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:01:d6", NAME="swp52", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:03:fb --> swp53"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:03:fb", NAME="swp53", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:00:85 --> swp54"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:00:85", NAME="swp54", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server01 #####
  config.vm.define "server01" do |device|
    
    device.vm.hostname = "server01" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp14
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:64",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31569',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30569',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf01:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:11:11:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30417',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31417',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf02:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:11:11:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30530',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31530',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:64 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:64", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:11:11:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:11:11:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:11:11:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:11:11:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server03 #####
  config.vm.define "server03" do |device|
    
    device.vm.hostname = "server03" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp15
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:66",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31570',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30570',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf03:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:33:33:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30316',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31316',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf04:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:33:33:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30303',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31303',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:66 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:66", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:33:33:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:33:33:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:33:33:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:33:33:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server02 #####
  config.vm.define "server02" do |device|
    
    device.vm.hostname = "server02" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp16
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:68",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31571',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30571',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf01:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:22:22:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30277',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31277',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf02:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:22:22:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30041',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31041',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:68 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:68", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:22:22:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:22:22:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:22:22:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:22:22:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server05 #####
  config.vm.define "server05" do |device|
    
    device.vm.hostname = "server05" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp17
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:6a",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31572',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30572',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf05:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:55:55:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30552',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31552',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf06:swp1
      device.vm.network "private_network",
            :mac => "00:03:00:55:55:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30086',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31086',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:6a --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:6a", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:55:55:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:55:55:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:55:55:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:55:55:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server06 #####
  config.vm.define "server06" do |device|
    
    device.vm.hostname = "server06" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp20
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:70",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31575',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30575',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf05:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:66:66:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30506',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31506',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf06:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:66:66:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30026',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31026',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:70 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:70", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:66:66:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:66:66:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:66:66:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:66:66:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for server04 #####
  config.vm.define "server04" do |device|
    
    device.vm.hostname = "server04" 
    
    device.vm.box = "yk0/ubuntu-xenial"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 512
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp29
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:82",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31584',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30584',
            :libvirt__iface_name => 'eth0',
            auto_config: false
      # link for eth1 --> leaf03:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:44:44:01",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30498',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31498',
            :libvirt__iface_name => 'eth1',
            auto_config: false
      # link for eth2 --> leaf04:swp2
      device.vm.network "private_network",
            :mac => "00:03:00:44:44:02",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '30435',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '31435',
            :libvirt__iface_name => 'eth2',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    # Shorten Boot Process - Applies to Ubuntu Only - remove \"Wait for Network\"
    device.vm.provision :shell , inline: "sed -i 's/sleep [0-9]*/sleep 1/' /etc/init/failsafe.conf 2>/dev/null || true"

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:82 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:82", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:44:44:01 --> eth1"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:44:44:01", NAME="eth1", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 00:03:00:44:44:02 --> eth2"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="00:03:00:44:44:02", NAME="eth2", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end

  ##### DEFINE VM for netq-ts #####
  config.vm.define "netq-ts" do |device|
    
    device.vm.hostname = "netq-ts" 
    
    device.vm.box = "cumulus/ts"

    device.vm.provider :libvirt do |v|
      v.nic_model_type = 'e1000' 
      v.memory = 1024
    end
    #   see note here: https://github.com/pradels/vagrant-libvirt#synced-folders
    device.vm.synced_folder ".", "/vagrant", disabled: true



    # NETWORK INTERFACES
      # link for eth0 --> oob-mgmt-switch:swp53
      device.vm.network "private_network",
            :mac => "44:38:39:00:04:b2",
            :libvirt__tunnel_type => 'udp',
            :libvirt__tunnel_local_ip => '127.0.0.1',
            :libvirt__tunnel_local_port => '31608',
            :libvirt__tunnel_ip => '127.0.0.1',
            :libvirt__tunnel_port => '30608',
            :libvirt__iface_name => 'eth0',
            auto_config: false



    # Fixes "stdin: is not a tty" and "mesg: ttyname failed : Inappropriate ioctl for device"  messages --> https://github.com/mitchellh/vagrant/issues/1673
    device.vm.provision :shell , inline: "(sudo grep -q 'mesg n' /root/.profile 2>/dev/null && sudo sed -i '/mesg n/d' /root/.profile  2>/dev/null) || true;", privileged: false

    
    # Run the Config specified in the Node Attributes
    device.vm.provision :shell , privileged: false, :inline => 'echo "$(whoami)" > /tmp/normal_user'
    device.vm.provision :shell , path: "./helper_scripts/extra_server_config.sh"


    # Install Rules for the interface re-map
    device.vm.provision :shell , :inline => <<-delete_udev_directory
if [ -d "/etc/udev/rules.d/70-persistent-net.rules" ]; then
    rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
fi
rm -rfv /etc/udev/rules.d/70-persistent-net.rules &> /dev/null
delete_udev_directory

device.vm.provision :shell , :inline => <<-udev_rule
echo "  INFO: Adding UDEV Rule: 44:38:39:00:04:b2 --> eth0"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{address}=="44:38:39:00:04:b2", NAME="eth0", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
udev_rule
     
      device.vm.provision :shell , :inline => <<-vagrant_interface_rule
echo "  INFO: Adding UDEV Rule: Vagrant interface = vagrant"
echo 'ACTION=="add", SUBSYSTEM=="net", ATTR{ifindex}=="2", NAME="vagrant", SUBSYSTEMS=="pci"' >> /etc/udev/rules.d/70-persistent-net.rules
echo "#### UDEV Rules (/etc/udev/rules.d/70-persistent-net.rules) ####"
cat /etc/udev/rules.d/70-persistent-net.rules
vagrant_interface_rule

# Run Any Platform Specific Code and Apply the interface Re-map
    #   (may or may not perform a reboot depending on platform)
    device.vm.provision :shell , :inline => $script

end



end